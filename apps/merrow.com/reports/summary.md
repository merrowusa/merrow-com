# Merrow.com Refactor ‚Äî Release Summary

> **Generated:** 2026-02-01
> **Phase:** P4 Release Candidate
> **Status:** Ready for Preview Deploy

---

## Gate Results

| Gate | Status | Notes |
|------|--------|-------|
| gate:routes | ‚úÖ PASS | All routes exist |
| gate:links | ‚úÖ PASS | No forbidden link patterns |
| gate:seo | ‚úÖ PASS | All pages have valid metadata |
| gate:redirects | ‚úÖ PASS | 90 redirects valid |
| gate:data | ‚úÖ PASS | DB connection OK, 40 machines, 156 agents, 72 applications |
| gate:nav-cache | ‚úÖ PASS | Header does not query DB directly |
| gate:dom | ‚úÖ PASS | 4/4 pages ‚Äî exactly one header/footer |
| backstop | ‚úÖ PASS | 48/48 scenarios |
| parity:strict | üî∂ BLOCKED | Header: 12.5% diff @10% threshold (needs CSS parity work). Footer: viewport capture @15% |
| parity:info | ‚ÑπÔ∏è INFO | Legacy vs refactor comparison (non-blocking) |

---

## Data Snapshot

| Entity | Count | Status |
|--------|-------|--------|
| Machines (published) | 31 | ‚úÖ All have S3 images |
| Agents/Dealers | 156 | ‚úÖ |
| Applications | 72 | ‚úÖ |
| Application Categories | 15 | ‚úÖ |
| Customer Stories | 5 | ‚úÖ |
| Threading Diagrams | 0 | ‚ö†Ô∏è Deferred (contact-based support) |
| Parts (PRODUCT) | 0 | ‚ö†Ô∏è Deferred (contact-based parts) |

---

## Policy Compliance

| Policy | Status | Evidence |
|--------|--------|----------|
| Policy 2: Nav Caching | ‚úÖ Enforced | `getNavData` uses `unstable_cache` (3600s), gate-nav-cache.ts blocks violations |
| Policy 3: Dual-Track | ‚úÖ Enforced | `.github/workflows/pr-check.yml` blocks parity PRs touching /v3/ |
| Policy 4: Supabase Only | ‚úÖ Compliant | No MySQL connections in codebase |

---

## Phase B Blockers

| Blocker | Status | Resolution |
|---------|--------|------------|
| B1: Header mega-menus | ‚úÖ PASS | `getNavData` created with unstable_cache |
| B2: Machines listing | ‚úÖ PASS | Catalog page with category cards |
| B3: Support pages | ‚úÖ DEFERRED | Contact-based (email/phone), no DB dependency |
| B4: Parts pages | ‚úÖ DEFERRED | Contact-based (email/phone), no DB dependency |
| B5: S3 images | ‚úÖ RESOLVED | 4 missing machines not published |
| B6: Content verification | ‚úÖ PASS | 1877 overlock patent added to timeline |

---

## Content Verification

| Check | Status |
|-------|--------|
| "1838" founding year | ‚úÖ Present in about.html, homepage, overlock-history |
| "1877" overlock patent | ‚úÖ Added to overlock-history timeline |
| "Made in USA" | ‚úÖ Present in about.html, overlock-history |
| "Family-owned" | ‚úÖ Present in overlock-history |

---

## Preview Deploy

**PREVIEW_URL:** [PENDING - Requires Vercel project setup]

**Charlie Action Required:** See [`reports/vercel-setup.md`](./vercel-setup.md) for click-by-click instructions.

1. Create Vercel project linked to `new_merrow_web` monorepo (root: `apps/merrow.com`)
2. Set environment secrets: `MERROW_SUPABASE_URL`, `MERROW_SUPABASE_ANON_KEY`, `MERROW_SUPABASE_SERVICE_ROLE_KEY`
3. Deploy preview branch
4. Record PREVIEW_URL in this file

---

## Rollback Plan

If issues are discovered after deploy:
1. Vercel: Revert to previous deployment in Vercel dashboard
2. DNS: No changes required (preview only)
3. Database: No schema changes in this release

---

*Generated by P4 execution. Review and approve before production deploy.*
