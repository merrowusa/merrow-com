google_api_version=gv_api_version=FindGoogleAPIVersion();if(!self.GLatLng){google_api_version=0}if(self.gv_maptypecontrol_style){if(document.getElementById("gv_credit")&&document.getElementById("gv_credit").innerHTML.indexOf("gpsvisualizer.com")<0){var credit_div=document.getElementById("gv_credit");credit_div.style.font="10px Verdana,sans-serif";credit_div.style.padding="1px";credit_div.style.backgroundColor="#ffffff";credit_div.innerHTML='<b>Map created at <a target="_top" href="http://www.gpsvisualizer.com/">GPSVisualizer.com</a></b>'}}if(!self.gv_options){GV_Setup_Global_Variables()}function GV_Setup_Global_Variables(){if(!self.gv_icons){gv_icons=[]}gv_icons.circle={is:[11,11],ia:[5,5],ss:[13,13],iwa:[10,2],isa:[5,9],im:[0,0,10,0,10,10,0,10,0,0],letters:true};gv_icons.pin={is:[15,26],ia:[7,25],ss:[30,26],iwa:[7,1],isa:[12,16],im:[5,25,5,15,2,13,1,12,0,10,0,5,1,2,2,1,4,0,10,0,12,1,13,2,14,4,14,10,13,12,12,13,9,15,9,25,5,25],letters:true};gv_icons.square={is:[11,11],ia:[5,5],ss:[13,13],iwa:[10,2],isa:[5,9],im:[0,0,10,0,10,10,0,10,0,0],letters:true};gv_icons.triangle={is:[13,13],ia:[6,6],ss:[15,15],iwa:[11,3],isa:[6,10],im:[0,11,6,0,12,11,0,11],letters:false};gv_icons.diamond={is:[13,13],ia:[6,6],ss:[13,13],iwa:[11,3],isa:[6,10],im:[6,0,12,6,6,12,0,6,6,0],letters:false};gv_icons.airport={is:[17,17],ia:[8,8],ss:[19,19],iwa:[13,3],isa:[13,17],im:[6,0,10,0,16,6,16,10,10,16,6,16,0,10,0,6,6,0],letters:false};gv_icons.google={is:[20,34],ia:[9,33],ss:[37,34],iwa:[9,2],isa:[18,25],im:[8,33,8,23,1,13,1,6,6,1,13,1,18,6,18,13,11,23,11,33],letters:true};gv_icons.googleblank={is:[20,34],ia:[9,33],ss:[37,34],iwa:[9,2],isa:[18,25],im:[8,33,8,23,1,13,1,6,6,1,13,1,18,6,18,13,11,23,11,33],letters:true};gv_icons.googlemini={is:[12,20],ia:[6,20],ss:[22,20],iwa:[5,1],isa:[10,15],im:[4,19,4,14,0,7,0,3,4,0,7,0,11,3,11,7,7,14,7,19,4,19],letters:true};gv_icons.blankcircle={is:[64,64],ia:[31,31],ss:[70,70],iwa:[55,8],isa:[31,63],im:[19,3,44,3,60,19,60,44,44,60,19,60,3,44,3,19,19,3],letters:false};gv_icons.camera={is:[17,13],ia:[8,6],ss:[19,15],iwa:[13,3],isa:[13,10],im:[1,3,6,1,10,1,15,3,15,11,1,11,1,3],letters:false};gv_icons.tickmark={is:[13,13],ia:[6,6],ss:[],iwa:[11,3],isa:[],im:[6,0,12,6,6,12,0,6,6,0],letters:false};gv_named_html_colors=GV_Define_Named_Colors();if(self.gv_default_marker){gv_marker_icon=(gv_default_marker.icon)?gv_default_marker.icon:"googlemini";gv_marker_color=(gv_default_marker.color)?gv_default_marker.color:"red";if(!gv_default_marker.icon_size){gv_default_marker.icon_size=gv_default_marker.size}gv_marker_icon_size=(gv_default_marker.icon_size)?gv_default_marker.icon_size:null;if(!gv_default_marker.icon_anchor){gv_default_marker.icon_anchor=gv_default_marker.anchor}gv_marker_icon_anchor=(gv_default_marker.icon_anchor)?gv_default_marker.icon_anchor:null;gv_marker_icon_trans=(gv_default_marker.transparent)?gv_default_marker.transparent:null;gv_marker_icon_imagemap=(gv_default_marker.imagemap)?gv_default_marker.imagemap:null}else{if(!self.gv_marker_icon){gv_marker_icon=(self.default_icon_style)?default_icon_style:"googlemini"}if(!self.gv_marker_color){gv_marker_color=(self.default_icon_color)?default_icon_color:"red"}gv_marker_icon_size=gv_marker_icon_trans=gv_marker_icon_imagemap=null}if(!self.gv_marker_link_target){gv_marker_link_target=(self.marker_link_target)?marker_link_target:"_blank"}if(!self.gv_maptypecontrol_style){gv_maptypecontrol_style=(self.maptypecontrol_style)?maptypecontrol_style:"menu"}if(self.gv_filter_map_types==null){gv_filter_map_types=(self.filter_map_types!=null)?filter_map_types:true}if(!self.gv_bg_opacity){gv_bg_opacity=(self.gv_bg_opacity)?gv_bg_opacity:100}if(!self.gv_icon_directory){gv_icon_directory="http://maps.gpsvisualizer.com/google_maps/icons/"}if(self.gv_driving_directions==null){gv_driving_directions=false}if(self.gv_label_offset&&self.gv_label_offset.length>1){gv_label_offset_x=gv_label_offset[0];gv_label_offset_y=gv_label_offset[1]}else{gv_label_offset_x=0;gv_label_offset_y=0}if(!self.gv_label_centered){gv_label_centered=false}gv_icon_directory=gv_icon_directory.replace(/http:\/\/www\.gpsvisualizer\.com\/google_maps\//,"http://maps.gpsvisualizer.com/google_maps/");gv_marker_list_exists=null;gv_marker_list_html="";gv_marker_list_folders=[];gv_marker_list_count=0;gv_marker_list_div=null;gv_marker_list_div_name=null;gv_marker_list_map_name=null;gv_marker_array_name=(self.gv_marker_list_options&&gv_marker_list_options.array)?gv_marker_list_options.array:"wpts";if(self.gv_marker_list_options){gv_marker_list_html="";gv_marker_list_folders=[];gv_marker_list_count=0;gv_marker_list_map_name=(gv_marker_list_options.map)?gv_marker_list_options.map:"gmap";if(gv_marker_list_options.id){gv_marker_list_options.div=gv_marker_list_options.id}else{if(gv_marker_list_options.floating===false||gv_marker_list_options.floating===true){if(gv_marker_list_options.floating===false){gv_marker_list_options.div=(gv_marker_list_options.id_static)?gv_marker_list_options.id_static:"gv_marker_list"}else{gv_marker_list_options.div=(gv_marker_list_options.id_static)?gv_marker_list_options.id_floating:"gv_marker_list"}}}if(document.getElementById(gv_marker_list_options.div)){gv_marker_list_div_name=gv_marker_list_options.div;gv_marker_list_div=document.getElementById(gv_marker_list_div_name)}else{if(document.getElementById("gv_marker_list")){gv_marker_list_div_name="gv_marker_list";gv_marker_list_div=document.getElementById(gv_marker_list_div_name)}else{gv_marker_list_div_name="";gv_marker_list_div=null}}if(gv_marker_list_div){if(gv_marker_list_options.list===false){gv_marker_list_div.style.display="none";gv_marker_list_exists=false}else{if(gv_marker_list_div.style.display==""||gv_marker_list_options.list==true){gv_marker_list_div.style.display="block";gv_marker_list_exists=true}else{gv_marker_list_exists=false}}}else{gv_marker_list_exists=false}}gv_filter_waypoints=null;gv_filter_marker_list=null;if(self.gv_marker_filter_options){gv_filter_marker_list=(gv_marker_filter_options.update_list)?true:false;gv_filter_waypoints=(gv_marker_filter_options.filter)?true:false;if(gv_marker_filter_options.dynamic_marker_options&&gv_marker_filter_options.dynamic_marker_options["url"]){gv_marker_filter_options.filter=false;gv_filter_waypoints=false}}defaultIcon=new GIcon();if(gv_marker_icon.substring(0,7)=="http://"){defaultIcon.image=gv_marker_icon;defaultIcon.iconSize=(self.gv_marker_icon_size&&gv_marker_icon_size[0]&&gv_marker_icon_size[1])?new GSize(gv_marker_icon_size[0],gv_marker_icon_size[1]):new GSize(32,32);defaultIcon.iconAnchor=(self.gv_marker_icon_anchor&&gv_marker_icon_anchor[0]!=null&&gv_marker_icon_anchor[1]!=null)?new GPoint(gv_marker_icon_anchor[0],gv_marker_icon_anchor[1]):new GPoint(defaultIcon.iconSize.width*0.5,defaultIcon.iconSize.height*0.5);defaultIcon.infoWindowAnchor=new GPoint(defaultIcon.iconSize.width*0.75,0);defaultIcon.infoShadowAnchor=new GPoint(defaultIcon.iconSize.width*0.5,defaultIcon.iconSize.height);defaultIcon.transparent=(self.gv_marker_icon_trans&&gv_marker_icon_trans.substring(0,7)=="http://")?gv_marker_icon_trans:null;defaultIcon.imageMap=(self.gv_marker_icon_imagemap&&gv_marker_icon_imagemap.length>5)?gv_marker_icon_imagemap:[0,0,0,defaultIcon.iconSize.height-1,defaultIcon.iconSize.width-1,defaultIcon.iconSize.height-1,defaultIcon.iconSize.width-1,0,0,0];defaultIcon.shadow=null;defaultIcon.shadowSize=null;gv_icons[gv_marker_icon]={is:[defaultIcon.iconSize.width,defaultIcon.iconSize.height],ia:[defaultIcon.iconAnchor.x,defaultIcon.iconAnchor.y],ss:null,iwa:[defaultIcon.infoWindowAnchor.width,defaultIcon.infoWindowAnchor.height],isa:[defaultIcon.infoShadowAnchor.width,defaultIcon.infoShadowAnchor.height],im:defaultIcon.imageMap}}else{if(!gv_icons[gv_marker_icon]){gv_marker_icon="googlemini"}defaultIcon.image=gv_icon_directory+gv_marker_icon+"/"+gv_marker_color.toLowerCase()+".png";defaultIcon.transparent=gv_icon_directory+gv_marker_icon+"/"+gv_marker_color.toLowerCase()+"-t.png";defaultIcon.iconSize=new GSize(gv_icons[gv_marker_icon]["is"][0],gv_icons[gv_marker_icon]["is"][1]);defaultIcon.iconAnchor=new GPoint(gv_icons[gv_marker_icon]["ia"][0],gv_icons[gv_marker_icon]["ia"][1]);defaultIcon.shadow=(gv_icons[gv_marker_icon]["ss"]&&gv_icons[gv_marker_icon]["ss"][0])?gv_icon_directory+gv_marker_icon+"/shadow.png":null;defaultIcon.shadowSize=(gv_icons[gv_marker_icon]["ss"]&&gv_icons[gv_marker_icon]["ss"][0])?new GSize(gv_icons[gv_marker_icon]["ss"][0],gv_icons[gv_marker_icon]["ss"][1]):null;defaultIcon.infoWindowAnchor=new GPoint(gv_icons[gv_marker_icon]["iwa"][0],gv_icons[gv_marker_icon]["iwa"][1]);defaultIcon.infoShadowAnchor=new GPoint(gv_icons[gv_marker_icon]["isa"][0],gv_icons[gv_marker_icon]["isa"][1]);if(gv_icons[gv_marker_icon]["im"]){defaultIcon.imageMap=[];for(i=0;i<gv_icons[gv_marker_icon]["im"].length;i++){defaultIcon.imageMap[i]=gv_icons[gv_marker_icon]["im"][i]}}else{defaultIcon.imageMap=[0,0,0,gv_icons[gv_marker_icon]["is"][1]-1,gv_icons[gv_marker_icon]["is"][0]-1,gv_icons[gv_marker_icon]["is"][1]-1,gv_icons[gv_marker_icon]["is"][0]-1,0,0,0]}}if(self.gv_default_marker&&gv_default_marker.scale){var A=gv_default_marker.scale;defaultIcon.iconSize.width*=A;defaultIcon.iconSize.height*=A;defaultIcon.iconAnchor.x*=A;defaultIcon.iconAnchor.y*=A;defaultIcon.infoWindowAnchor.x*=A;defaultIcon.infoWindowAnchor.y*=A;if(defaultIcon.shadow){defaultIcon.shadowSize.width*=A;defaultIcon.shadowSize.height*=A;defaultIcon.infoShadowAnchor.x*=A;defaultIcon.infoShadowAnchor.y*=A}if(defaultIcon.imageMap){for(i=0;i<defaultIcon.imageMap.length;i++){defaultIcon.imageMap[i]*=A}}}if(self.gv_default_marker&&gv_default_marker.opacity==100){gv_default_marker.opacity=1}}GV_Styles();function GV_Styles(){document.writeln('		<style type="text/css">');document.writeln("			img.gv_wpt_thumbnail { display:block; text-decoration:none; margin:0px; }");document.writeln("			img.gv_wpt_photo { display:block; text-decoration:none; margin:0px; }");document.writeln("			.gv_tooltip { background-color:#ffffff; filter:alpha(opacity=100); -moz-opacity:1.0; border:1px solid #666666; padding:2px; text-align:left; font:10px Verdana,sans-serif; color:black; white-space:nowrap; }");document.writeln("			.gv_tooltip img.gv_wpt_thumbnail { display:block; padding-top:3px; }");document.writeln("			.gv_tooltip img.gv_wpt_photo { display:none; }");document.writeln("			.gv_label { filter:alpha(opacity=90); -moz-opacity:0.9; background:#333333; border:1px solid black; padding:1px; text-align:left; white-space:nowrap; font:9px Verdana,sans-serif; color:white; }");document.writeln("			.gv_wpt { font: 10px Verdana,sans-serif; }");document.writeln("			.gv_wpt_name { padding-bottom:4px; }");document.writeln("			.gv_wpt img.gv_wpt_thumbnail { border-width:1px; margin:6px 0px 6px 0px; }");document.writeln("			.gv_wpt img.gv_wpt_photo { margin:8px 0px 8px 0px; }");document.writeln("			.gv_driving_directions { background-color:#eeeeee; padding:4px; margin-top:12px; }");document.writeln("			.gv_driving_directions_heading { color:#666666; font-weight:bold; }");document.writeln("			img.hidden_in_info_window { display:none; }");document.writeln("			.gv_label { filter:alpha(opacity=80); -moz-opacity:0.8; background:#333333; border:1px solid black; padding:1px; text-align:left; white-space: nowrap; font:9px Verdana,sans-serif; color:white; }");document.writeln("			.gv_label img { display:none; }");document.writeln("			.gv_legend_item { padding-bottom:0px; line-height:1em; font-weight:bold; }");document.writeln("			.gv_tracklist_item { padding-top:1px; padding-bottom:2px; }");document.writeln("			.gv_tracklist_name { font-weight:bold; }");document.writeln("			.gv_tracklist_desc { font-weight:normal; padding-top:2px; }");document.writeln("			.gv_marker_list { font-family:Verdana,sans-serif; font-size:10px; }");document.writeln("			.gv_marker_list_item { padding:2px 0px 4px 0px; font-family:Verdana,sans-serif; font-size:10px; line-height:1.2em; }");document.writeln("			.gv_marker_list_item .name { font-size:10px; font-weight:bold; }");document.writeln("			.gv_marker_list_item .desc { font-size:9px; filter:alpha(opacity=80); -moz-opacity:0.8; }");document.writeln("			.gv_marker_list_item .icon { cursor:crosshair; float:left; margin-right:4px; margin-bottom:1px; }");document.writeln("			.gv_marker_list_border_top { border-top:1px solid #CCCCCC; }");document.writeln("			.gv_marker_list_border_bottom { border-bottom:1px solid #CCCCCC; }");document.writeln("			.gv_marker_list_thumbnail { padding-top:3px; border-width:1px; display:none; }");document.writeln("			.gv_marker_list_thumbnail img { border-width:1px; }");document.writeln("			.gv_marker_list_folder { padding-bottom:4px; }");document.writeln("			.gv_marker_list_folder_name { font-size:11px; font-weight:bold; padding-bottom:2px; background:#E4E4E4; }");document.writeln("			.gv_marker_list_folder_contents { padding-left:15px; }");document.writeln("			.gv_maptypelink { background-color:#dddddd; color:#000000; text-align:center; white-space: nowrap; border:1px solid; border-color: #999999 #222222 #222222 #999999; padding:1px 2px 1px 2px; margin-bottom:3px; font:9px Verdana,sans-serif; text-decoration:none; cursor:pointer; }");document.writeln("			.gv_maptypelink_selected { background-color:#ffffff; }");document.writeln("			.gv_opacity_screen { background-color:#ffffff; }");document.writeln("		</style>");document.writeln('		<style type="text/css" media="print">');document.writeln('			img[src^="http://www.gpsvisualizer.com/"].gmnoprint { display:inline; }');document.writeln('			img[src^="http://maps.gpsvisualizer.com/"].gmnoprint { display:inline; }');document.writeln('			img[src^="http://mt.google.com/mld"].gmnoprint { display:inline; }');document.writeln('			img[src$="transparent.png"].gmnoprint { display:none; }');document.writeln('			img[src$="shadow.png"].gmnoprint { display:none; }');document.writeln('			img[src$="crosshair.gif"].gmnoprint { display:none; }');document.writeln("			.gv_label { color:black; background:white; filter:alpha(opacity=100); -moz-opacity:1.0; }");document.writeln("		</style>")}function GV_Setup_Map(opts){var map_name=opts.map||"gmap";var map=eval(map_name);if(!map){return false}var marker_array_name=opts.marker_array||"wpts";var track_info_array_name=opts.track_info_array||"trk_info";gv_default_marker=opts.default_marker;gv_icon_directory=opts.icon_directory;gv_marker_link_target=opts.marker_link_target;gv_driving_directions=opts.driving_directions;gv_hide_labels=opts.hide_labels;gv_label_offset=opts.label_offset;gv_label_centered=opts.label_centered;gv_marker_filter_options=opts.marker_filter_options;if(opts.marker_list_options){gv_marker_list_options=opts.marker_list_options}else{gv_marker_list_options=[]}gv_marker_list_options.map=map_name;gv_marker_list_options.array=marker_array_name;if(opts.full_screen){document.body.style.margin="0px";document.body.style.overflow="hidden";GV_Fill_Window_With_Map(map.getContainer().id);map.getContainer().style.margin="0px";gv_marker_list_options.floating=true}GV_Setup_Global_Variables();if(!opts.doubleclick_zoom){map.disableDoubleClickZoom()}if(opts.mousewheel_zoom){if(opts.mousewheel_zoom=="reverse"){GEvent.addDomListener(document.getElementById(opts.map_div),"DOMMouseScroll",GV_MouseWheelReverse);GEvent.addDomListener(document.getElementById(opts.map_div),"mousewheel",GV_MouseWheelReverse)}else{GEvent.addDomListener(document.getElementById(opts.map_div),"DOMMouseScroll",GV_MouseWheel);GEvent.addDomListener(document.getElementById(opts.map_div),"mousewheel",GV_MouseWheel)}}if(opts.zoom=="auto"||(!opts.zoom&&opts.zoom!="0")){if(!opts.center||(opts.center||opts.center.length==0)){opts.center=[40,-100]}map.setCenter(new GLatLng(opts.center[0],opts.center[1]),8,eval(opts.map_type||"G_NORMAL_MAP"))}else{map.setCenter(new GLatLng(opts.center[0],opts.center[1]),opts.zoom,eval(opts.map_type||"G_NORMAL_MAP"))}if(opts.map_type_control&&opts.map_type_control["style"]&&opts.map_type_control["style"]=="google"){map.addControl(gv_maptypecontrol=new GMapTypeControl())}else{if(opts.map_type_control&&opts.map_type_control["style"]&&opts.map_type_control["style"]!="none"){map.addControl(gv_maptypecontrol=new GV_MapTypeControl(opts.map_type_control))}}if(opts.map_opacity_control){map.addControl(gv_mapopacitycontrol=new GV_MapOpacityControl(opts.map_opacity))}else{if(opts.map_opacity!=1&&opts.map_opacity!=100){GV_Background_Opacity(map,opts.map_opacity)}}if(opts.zoom_control&&opts.zoom_control!="none"&&opts.zoom_control!="false"){if(opts.zoom_control=="small"){map.addControl(new GSmallMapControl())}else{map.addControl(new GLargeMapControl())}}if(opts.scale_control){map.addControl(new GScaleControl())}if(opts.tracklist_options&&opts.tracklist_options["tracklist"]){var o=opts.tracklist_options;o.container_id=o.id+"_container";o.table_id=o.id+"_table";o.handle_id=o.id+"_handle";if(document.getElementById(o.container_id)&&o.position&&o.position.length>=3){if(document.getElementById(o.table_id)&&document.getElementById(o.handle_id)&&o.draggable){var vertical_offset=2000;document.getElementById(o.table_id).style.top="-"+vertical_offset+"px";if(o.position[0].indexOf("_BOTTOM_")>-1){GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]-vertical_offset)}else{GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]+vertical_offset)}Drag.init(document.getElementById(o.handle_id),document.getElementById(o.table_id));if(o.collapsible){GV_Windowshade_Setup(o.handle_id,o.id)}}else{GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]);if(document.getElementById(o.handle_id)){document.getElementById(o.handle_id).style.display="none"}}}}if(self.gv_marker_list_options&&gv_marker_list_options.list&&gv_marker_list_exists){var o=gv_marker_list_options;if(o.floating===false&&o.id_static){o.id=o.id_static}else{if(o.floating&&o.id_floating){o.id=o.id_floating}else{if(!o.id){o.id="gv_marker_list"}}}o.container_id=o.id+"_container";o.table_id=o.id+"_table";o.handle_id=o.id+"_handle";if(o.floating&&o.container_id&&document.getElementById(o.container_id)){if(o.width){document.getElementById(o.id).style.width=o.width+"px"}if(o.height){document.getElementById(o.id).style.height=o.height+"px"}if(document.getElementById(o.container_id)&&o.position&&o.position.length>=3){if(document.getElementById(o.table_id)&&document.getElementById(o.handle_id)&&o.draggable){var vertical_offset=2000;document.getElementById(o.table_id).style.top="-"+vertical_offset+"px";if(o.position[0].indexOf("_BOTTOM_")>-1){GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]-vertical_offset)}else{GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]+vertical_offset)}Drag.init(document.getElementById(o.handle_id),document.getElementById(o.table_id));if(o.collapsible){GV_Windowshade_Setup(o.handle_id,o.id)}}else{GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]);if(document.getElementById(o.handle_id)){document.getElementById(o.handle_id).style.display="none"}}}}else{if(document.getElementById(o.id)){document.getElementById(o.id).style.display="block"}}}if(opts.legend_options&&opts.legend_options["legend"]){var o=opts.legend_options;o.container_id=o.id+"_container";o.table_id=o.id+"_table";o.handle_id=o.id+"_handle";if(document.getElementById(o.container_id)&&o.position&&o.position.length>=3){if(document.getElementById(o.table_id)&&document.getElementById(o.handle_id)&&o.draggable){var vertical_offset=2000;document.getElementById(o.table_id).style.top="-"+vertical_offset+"px";if(o.position[0].indexOf("_BOTTOM_")>-1){GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]-vertical_offset)}else{GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]+vertical_offset)}Drag.init(document.getElementById(o.handle_id),document.getElementById(o.table_id));if(o.collapsible){GV_Windowshade_Setup(o.handle_id,o.id)}}else{GV_Place_Control(map,o.container_id,eval(o.position[0]),o.position[1],o.position[2]);if(document.getElementById(o.handle_id)){document.getElementById(o.handle_id).style.display="none"}}}}if(opts.center_coordinates){if(!document.getElementById("gv_center_container")){var center_div=document.createElement("div");center_div.id="gv_center_container";center_div.style.display="none";center_div.innerHTML='<table style="cursor:crosshair; filter:alpha(opacity=80); -moz-opacity:0.80;" cellspacing="0" cellpadding="0" border="0"><tr><td><div id="gv_center_coordinates" style="background-color:#ffffff; border:solid #666666 1px; padding:1px; font-family:Arial; font-size:10px; line-height:11px;" class="gmnoprint" onClick="GV_Toggle(\'gv_crosshair\'); gv_crosshair_temporarily_hidden = false;" title="Click here to turn center crosshair on or off"></div></td></tr></table>';map.getContainer().appendChild(center_div)}GV_Place_Control(map,"gv_center_container",G_ANCHOR_BOTTOM_LEFT,4,40);if(!document.getElementById("gv_crosshair_container")){var crosshair_div=document.createElement("div");crosshair_div.id="gv_crosshair_container";crosshair_div.style.display="none";crosshair_div.className="gmnoprint";crosshair_div.innerHTML='<div id="gv_crosshair" align="center" style="width:15px; height:15px; display:block;"><img src="http://maps.gpsvisualizer.com/google_maps/crosshair.gif" alt="" width="15" height="15"></div>';map.getContainer().appendChild(crosshair_div)}if(document.getElementById("gv_crosshair")){document.getElementById("gv_crosshair").style.display=(opts.crosshair_hidden)?"none":"block";gv_hidden_crosshair_is_still_hidden=true}GV_Setup_Crosshair(map,{crosshair_container_id:"gv_crosshair_container",crosshair_graphic_id:"gv_crosshair",crosshair_width:15,center_coordinates_id:"gv_center_coordinates",fullscreen:opts.full_screen})}if(document.getElementById("gv_credit")&&document.getElementById("gv_credit").innerHTML.indexOf("gpsvisualizer.com")<0){var bogus_credit=document.getElementById("gv_credit");bogus_credit.parentNode.removeChild(bogus_credit)}if(!document.getElementById("gv_credit")){var credit_div=document.createElement("div");credit_div.id="gv_credit";credit_div.style.display="none";credit_div.style.font="10px Verdana,sans-serif";credit_div.style.padding="1px";credit_div.style.backgroundColor="#ffffff";credit_div.style.filter="alpha(opacity=80)";credit_div.style.MozOpacity=0.8;credit_div.style.KhtmlOpacity=0.8;credit_div.innerHTML=(gv_options.custom_credit&&gv_options.custom_credit.indexOf("gpsvisualizer.com")>-1)?gv_options.custom_credit:'<b>Map created at <a target="_top" href="http://www.gpsvisualizer.com/">GPSVisualizer.com</a></b>';map.getContainer().appendChild(credit_div)}if(gv_options.credit_position&&gv_options.credit_position.length>=3&&gv_options.credit_position[1]<map.getContainer().clientWidth&&gv_options.credit_position[2]<map.getContainer().clientHeight){GV_Place_Control(map,"gv_credit",eval(gv_options.credit_position[0]),gv_options.credit_position[1],gv_options.credit_position[2])}else{GV_Place_Control(map,"gv_credit",G_ANCHOR_BOTTOM_RIGHT,6,20)}}function GV_Setup_Waypoint_Processing_Events(map_name,marker_array_name){map_name=(map_name)?map_name:"gmap";var map=eval(map_name);if(!map){return false}marker_array_name=(marker_array_name)?marker_array_name:"wpts";if(eval("self."+marker_array_name)){var marker_array=eval(marker_array_name);if(gv_filter_waypoints){GEvent.addListener(map,"moveend",function(){window.setTimeout("GV_Process_Waypoints("+map_name+","+marker_array_name+")",50)});GEvent.addListener(map,"resize",function(){window.setTimeout("GV_Process_Waypoints("+map_name+","+marker_array_name+")",50)})}if(gv_options.dynamic_marker_options&&gv_options.dynamic_marker_options["url"]){GEvent.addListener(map,"moveend",function(){window.setTimeout("GV_Get_Dynamic_Markers(gv_options)",50)})}if(gv_options.dynamic_data&&gv_options.dynamic_data.length){for(i=0;i<gv_options.dynamic_data.length;i++){if(gv_options.dynamic_data[i]&&gv_options.dynamic_data[i]["url"]&&gv_options.dynamic_data[i]["reload_on_move"]){GEvent.addListener(map,"moveend",function(){window.setTimeout("GV_Reload_Markers_From_File("+i+")",50)})}}}GV_Process_Waypoints(map,marker_array)}}function GV_Process_Waypoints(B,C){if(!C){return false}var A=false;if(B.getInfoWindow()&&B.getInfoWindow().isHidden()===false){A=true}if(gv_filter_waypoints){GV_Filter_Waypoints_In_View(B,C)}if(gv_marker_list_exists){GV_Marker_List()}if(self.gv_labels_are_visible&&gv_labels_are_visible&&self.gv_options&&gv_options.marker_array){GV_Toggle_All_Labels(gv_options.marker_array,true)}if(gv_filter_waypoints&&self.gv_marker_filter_moved_enough&&gv_marker_filter_moved_enough===true&&A&&self.gv_open_infowindow_index&&gv_open_infowindow_index!=null){GEvent.trigger(C[gv_open_infowindow_index],"click");GEvent.trigger(C[gv_open_infowindow_index],"mouseout")}}gv_dynamic_file_index=-1;function GV_Finish_Map(opts){var map_name=opts.map||"gmap";var map=eval(map_name);if(!map){return false}var marker_array_name=opts.marker_array||"wpts";var track_array_name=opts.track_array||"trk";var track_array_name=opts.track_array||"trk";var track_info_array_name=opts.track_info_array||"trk_info";var track_array=eval("self."+track_array_name);if(gv_options.dynamic_data&&!gv_options.dynamic_data.length){gv_options.dynamic_data=[gv_options.dynamic_data]}if(gv_options.dynamic_data&&gv_options.dynamic_data[gv_dynamic_file_index+1]&&(gv_options.dynamic_data[gv_dynamic_file_index+1]["url"]||gv_options.dynamic_data[gv_dynamic_file_index+1]["google_spreadsheet"])&&!gv_options.dynamic_data[gv_dynamic_file_index+1]["processed"]){gv_dynamic_file_index+=1;GV_Load_Markers_From_File();return }if(opts.zoom=="auto"||(!opts.zoom&&opts.zoom!="0")){GV_Autozoom({map:map_name,adjustment:gv_options.autozoom_adjustment},eval("self."+track_array_name),eval("self."+marker_array_name));opts.center=[map.getCenter().lat(),map.getCenter().lng()];map.setMapType(eval(opts.map_type))}gv_dynamic_data_last_center=map.getCenter();gv_dynamic_data_last_zoom=map.getZoom();if(eval("self."+track_info_array_name)&&opts.filter_tracks){GEvent.addListener(map,"moveend",function(){window.setTimeout("GV_Filter_Tracks("+map_name+","+track_info_array_name+")",75)})}if(opts.full_screen){window.onresize=function(){GV_Fill_Window_With_Map(map.getContainer().id);map.checkResize()};window.setTimeout(map_name+".checkResize(); "+map_name+".setCenter(new GLatLng("+opts.center[0]+","+opts.center[1]+"));",100)}if(document.location.toString().match(/[&\\?](gv_force_[a-z]+)=([^&]+)/)){window.setTimeout("GV_Recenter_Per_URL({center_key:'gv_force_recenter',zoom_key:'gv_force_zoom',maptype_key:'gv_force_maptype'})",100)}if(!track_array||track_array.length==0){if(gv_options.tracklist_options&&gv_options.tracklist_options["tracklist"]&&document.getElementById("gv_tracklist_links")&&!document.getElementById("gv_tracklist_links").innerHTML.match(/\w/)){GV_Remove_Control("gv_tracklist_container")}}window.setTimeout("gv_hidden_crosshair_is_still_hidden = false;",150);window.setTimeout('GV_Setup_Waypoint_Processing_Events("'+map_name+'","'+marker_array_name+'")',200)}function GV_Autozoom(){var opts=arguments[0];arguments.shift;opts.map=opts.map||"gmap";opts.adjustment=(opts.adjustment&&parseInt(opts.adjustment))?parseInt(opts.adjustment):0;opts.margin=(opts.margin&&parseInt(opts.margin))?parseInt(opts.margin):0;opts.save_position=(opts.save_position===false||opts.save_position==0)?false:true;var map=eval(opts.map);if(!map){return false}var min_lat=90;var max_lat=-90;var min_lon=360;var max_lon=-360;for(i=0;i<arguments.length;i++){if(arguments[i]){if(arguments[i].getLatLng){if(arguments[i].getLatLng().lng()<min_lon){min_lon=arguments[i].getLatLng().lng()}if(arguments[i].getLatLng().lng()>max_lon){max_lon=arguments[i].getLatLng().lng()}if(arguments[i].getLatLng().lat()<min_lat){min_lat=arguments[i].getLatLng().lat()}if(arguments[i].getLatLng().lat()>max_lat){max_lat=arguments[i].getLatLng().lat()}}else{if(typeof (arguments[i])=="object"&&arguments[i].length){if(arguments[i][0]&&arguments[i][0].getVertexCount){for(ts=0;ts<arguments[i].length;ts++){var bounds=arguments[i][ts].getBounds();var w=bounds.getSouthWest().lng();var s=bounds.getSouthWest().lat();var e=bounds.getNorthEast().lng();var n=bounds.getNorthEast().lat();if(w<min_lon){min_lon=w}if(e>max_lon){max_lon=e}if(s<min_lat){min_lat=s}if(n>max_lat){max_lat=n}}}else{for(j=0;j<arguments[i].length;j++){if(arguments[i][j]){if(arguments[i][j][0]&&arguments[i][j][0].getVertexCount){for(ts=0;ts<arguments[i][j].length;ts++){var bounds=arguments[i][j][ts].getBounds();var w=bounds.getSouthWest().lng();var s=bounds.getSouthWest().lat();var e=bounds.getNorthEast().lng();var n=bounds.getNorthEast().lat();if(w<min_lon){min_lon=w}if(e>max_lon){max_lon=e}if(s<min_lat){min_lat=s}if(n>max_lat){max_lat=n}}}else{if(arguments[i][j].getLatLng){if(arguments[i][j].getLatLng().lng()<min_lon){min_lon=arguments[i][j].getLatLng().lng()}if(arguments[i][j].getLatLng().lng()>max_lon){max_lon=arguments[i][j].getLatLng().lng()}if(arguments[i][j].getLatLng().lat()<min_lat){min_lat=arguments[i][j].getLatLng().lat()}if(arguments[i][j].getLatLng().lat()>max_lat){max_lat=arguments[i][j].getLatLng().lat()}}}}}}}}}}if(min_lat!=90&&max_lat!=-90&&min_lon!=360&&max_lon!=-360){var bounds=new GLatLngBounds(new GLatLng(min_lat,min_lon),new GLatLng(max_lat,max_lon));var zoom=map.getBoundsZoomLevel(bounds,new GSize(map.getSize().width-(opts.margin*2),map.getSize().height-(opts.margin*2)));if(min_lat==max_lat&&min_lon==max_lon){zoom=8}map.setCenter(bounds.getCenter(),zoom+opts.adjustment);if(opts.save_position){map.savePosition()}}}var gv_marker_count=0;var gv_global_window_width=(self.gv_options)?parseFloat(gv_options.info_window_width):0;var gv_global_thumbnail_width=(self.gv_options)?parseFloat(gv_options.thumbnail_width):0;var gv_global_photo_width=(self.gv_options)?parseFloat(gv_options.photo_width):0;function GV_Marker(S,e,G,L,o,F,T,s,A,d){var u={};if(e.lat!=undefined||e.address!=undefined){u=e;if(u.style&&!u.icon){u.icon=u.style}}else{u.lat=e;u.lon=G;u.name=L;u.desc=o;u.url=F;u.color=T;u.icon=s;u.window_width=A;u.label_id=d}if(u.address&&!u.lat){var M=new GClientGeocoder();M.getLatLng(u.address,function(m){if(m){u.lat=m.lat();u.lon=m.lng();GV_Marker(S,u)}});return }var D=new GIcon(defaultIcon);var O=(u.scale>0&&(!self.gv_default_marker||(self.gv_default_marker&&gv_default_marker.scale!=u.scale)))?true:false;var b=(u.scale>0)?u.scale:(self.gv_default_marker&&gv_default_marker.scale)?gv_default_marker.scale:1;if(u.opacity==100){u.opacity=1}var x=(u.opacity>0)?u.opacity:(self.gv_default_marker&&gv_default_marker.opacity)?gv_default_marker.opacity:1;if(u.icon_url||(u.icon&&u.icon.toString().substring(0,7)=="http://")||(!u.icon&&gv_marker_icon.substring(0,7)=="http://")){D.image=(u.icon_url)?u.icon_url:u.icon||gv_marker_icon;var r=(self.gv_marker_icon_size&&gv_marker_icon_size[0])?gv_marker_icon_size[0]:32;var f=(self.gv_marker_icon_size&&gv_marker_icon_size[1])?gv_marker_icon_size[1]:32;D.iconSize=(u.icon_size&&u.icon_size[0]&&u.icon_size[1])?new GSize(u.icon_size[0]*b,u.icon_size[1]*b):new GSize(r*b,f*b);var Z=(self.gv_marker_icon_anchor&&gv_marker_icon_anchor[0])?gv_marker_icon_anchor[0]:D.iconSize.width*0.5;var Y=(self.gv_marker_icon_anchor&&gv_marker_icon_anchor[1])?gv_marker_icon_anchor[1]:D.iconSize.height*0.5;D.iconAnchor=(u.icon_anchor&&u.icon_anchor[0]!=null&&u.icon_anchor[1]!=null)?new GPoint(u.icon_anchor[0]*b,u.icon_anchor[1]*b):new GPoint(Z,Y);D.infoWindowAnchor=new GPoint(D.iconSize.width*0.75,0);D.infoShadowAnchor=new GPoint(D.iconSize.width*0.5,D.iconSize.height);D.shadow=null;D.shadowSize=null;D.transparent=null;D.imageMap=null}else{if(u.icon||u.color||u.letter||u.rotation!=undefined||O||x!=1){var K=(u.icon&&gv_icons[u.icon])?u.icon:gv_marker_icon;var T=(u.color)?u.color.toLowerCase():gv_marker_color.toLowerCase();if(T.substring(0,1)=="#"){T=T.replace(/^\#/,"")}var V=(u.rotation!=undefined)?"-r"+(1000+(5*Math.round(((u.rotation+360)%360)/5))).toString().substring(1,4):"";var h=(gv_icons[K]["directory"])?gv_icons[K]["directory"]:gv_icon_directory+K;if(u.icon||O){D.iconSize=new GSize(gv_icons[K]["is"][0]*b,gv_icons[K]["is"][1]*b);D.iconAnchor=new GPoint(gv_icons[K]["ia"][0]*b,gv_icons[K]["ia"][1]*b);D.shadow=(gv_icons[K]["ss"]&&gv_icons[K]["ss"][0])?h+"/shadow.png":null;D.shadowSize=(gv_icons[K]["ss"]&&gv_icons[K]["ss"][0])?new GSize(gv_icons[K]["ss"][0]*b,gv_icons[K]["ss"][1]*b):null;D.infoWindowAnchor=(gv_icons[K]["iwa"]&&gv_icons[K]["iwa"][0])?new GPoint(gv_icons[K]["iwa"][0]*b,gv_icons[K]["iwa"][1]*b):null;D.infoShadowAnchor=(gv_icons[K]["isa"]&&gv_icons[K]["isa"][0])?new GPoint(gv_icons[K]["isa"][0]*b,gv_icons[K]["isa"][1]*b):null;if(O){D.imageMap=[];for(j=0;j<gv_icons[K]["im"].length;j++){D.imageMap[j]=gv_icons[K]["im"][j]*b}}else{D.imageMap=gv_icons[K]["im"]}}var W="";if(x!=1){W=(x<1)?"-"+Math.round(x*100):"-"+Math.round(x);D.shadow=null;D.shadowSize=null}D.image=h+"/"+T.toLowerCase()+V+W+".png";if(u.letter&&gv_icons[K]["letters"]){D.transparent=h+"/transparent-"+u.letter.toUpperCase()+".png"}else{D.transparent=h+"/"+T.toLowerCase()+V+"-t.png"}}}if(document.location.toString().indexOf("moveon.org")>-1){var T=(u.color)?u.color.toLowerCase():gv_marker_color.toLowerCase();D.image="http://labs.google.com/ridefinder/images/mm_20_"+T+".png";D.shadow="http://labs.google.com/ridefinder/images/mm_20_shadow.png";D.transparent=null}var y=(google_api_version>=2)?new GMarker(new GLatLng(u.lat,u.lon),{icon:D,draggable:false}):new GMarker(new GPoint(u.lon,u.lat),D);gv_marker_count+=1;var I="";if(u.name){if(u.url&&u.url!=null){I=I+'<div class="gv_wpt_name"><b><a target="'+gv_marker_link_target+'" href="'+u.url+'" title="'+u.url+'">'+u.name+"</a></b></div>"}else{I=I+'<div class="gv_wpt_name"><b>'+u.name+"</b></div>"}}if(u.thumbnail&&!u.photo){var H=(u.thumbnail_width)?' style="width:'+parseFloat(u.thumbnail_width)+'px;"':(gv_global_thumbnail_width>0)?' style="width:'+gv_global_thumbnail_width+'px;"':"";var p='<img class="gv_wpt_thumbnail" src="'+u.thumbnail+'"'+H+">";if(u.url){p='<a target="'+gv_marker_link_target+'" href="'+u.url+'">'+p+"</A>"}I=I+p}else{if(u.photo){var B=(u.photo_width)?' style="width:'+parseFloat(u.photo_width)+'px;"':(gv_global_photo_width>0)?' style="width:'+gv_global_photo_width+'px;"':"";I=I+'<div><img class="gv_wpt_photo" src="'+u.photo+'"'+B+"></div>"}}if(u.desc){I=I+'<div class="gv_wpt_desc">'+u.desc+"</div>"}if(u.dd||(gv_driving_directions&&u.dd!==false)){I=I+'<table class="gv_driving_directions" cellspacing="0" cellpadding="0" border="0"><tr><td><form action="http://maps.google.com/maps" target="_blank" style="margin:0px;">';I=I+'<input type="hidden" name="daddr" value="'+(u.dd_lat||u.lat)+","+(u.dd_lon||u.lon)+" ("+u.name.replace(/<[^>]*>/g,"").replace(/\(/g,"[").replace(/\)/g,"]").replace(/"/g,"&quot;")+')">';I=I+'<p class="gv_driving_directions_heading" style="margin:2px 0px 4px 0px; white-space:nowrap">Driving directions to this point</p>';I=I+'<p style="margin:0px; white-space:nowrap;">Enter your starting address:<br><input type="text" size="20" name="saddr" value="">&nbsp;<input type="submit" value="Go"></p>';I=I+"</td></tr></table>"}if(self.gv_marker_list_options&&gv_marker_list_options.folder_field&&u[gv_marker_list_options.folder_field]){u.folder=u[gv_marker_list_options.folder_field]}var P=0;var a=(google_api_version>=2)?S.getSize().width-100:500;var C=parseFloat(u.window_width);if(C>0&&C<a){P=C}else{if(gv_global_window_width>0&&gv_global_window_width<a){P=gv_global_window_width}}if(P>0&&P<200){P=200}var U=(P>0)?"width:"+P+"px;":"";var Q='<div style="text-align:left; '+U+'" class="gv_wpt">'+I+"</div>";if(I){GEvent.addListener(y,"click",function(){y.openInfoWindowHtml(Q,{maxWidth:a});gv_open_infowindow_index=y.index})}var c=false;if(gv_filter_waypoints){var AA=S.getBounds().getSouthWest().lat();var R=S.getBounds().getSouthWest().lng();var E=S.getBounds().getNorthEast().lat();var X=S.getBounds().getNorthEast().lng();if(X<R){R=-180;X=180}if(u.lon<R||u.lon>X||u.lat<AA||u.lat>E){c=true}}if(u.label||u.label_id){var z=(u.label)?u.label:u.name;var d=(u.label_id)?u.label_id:gv_marker_array_name+"_label["+(gv_marker_count-1)+"]";var J=(self.gv_hide_labels&&gv_hide_labels)?true:false;var w=gv_label_offset_x;var v=gv_label_offset_y;var t=gv_label_centered;if(u.label_offset&&u.label_offset.length>1){w=u.label_offset[0];v=u.label_offset[1]}if((u.label_centered==true&&!t)||(u.label_centered==false&&t)){t=u.label_centered}var q=new ELabel(new GLatLng(u.lat,u.lon),z,"gv_label",new GSize(D.iconSize.width/2+1+w,8+v),100,false,d,J,t);S.addOverlay(q);y.label_object=q}if(u.name||u.thumbnail){if(google_api_version>=2){if(!document.getElementById("gv_tooltip")){tooltip=GV_Initialize_Marker_Tooltip(S)}var g=u.name+" ";if(u.thumbnail){var H=(u.thumbnail_width)?' style="width:'+parseFloat(u.thumbnail_width)+'px;"':(gv_global_thumbnail_width>0)?' style="width:'+gv_global_thumbnail_width+'px;"':"";g=g+'<img class="gv_wpt_thumbnail" src="'+u.thumbnail+'"'+H+">"}if(u.photo){g=g+'<img class="gv_wpt_photo" src="'+u.photo+'">'}y.tooltip='<div class="gv_tooltip">'+g+"</div>";GEvent.addListener(y,"mouseover",function(){GV_Create_Marker_Tooltip(S,y)});GEvent.addListener(y,"mouseout",function(){tooltip.style.visibility="hidden"})}else{var N=y.images[0];if(y.iconImage){N=y.iconImage}if(y.transparentIcon){N=y.transparentIcon}if(y.imageMap){N=y.imageMap}N.setAttribute("title",u.name)}}if(google_api_version>=2){y.index=gv_marker_count-1;y.name=(u.name)?u.name:"[unnamed]";y.desc=(u.desc)?u.desc:"";y.url=(u.url)?u.url:"";y.shortdesc=(u.shortdesc)?u.shortdesc:"";y.html=Q;y.window_width=(u.window_width)?u.window_width:"";y.color=(u.color)?u.color.toLowerCase():gv_marker_color.toLowerCase();y.width=D.iconSize.width;y.height=D.iconSize.height;y.image=D.image;y.coords=new GLatLng(u.lat,u.lon);y.thumbnail=(u.thumbnail)?u.thumbnail:"";y.thumbnail_width=(u.thumbnail_width)?u.thumbnail_width:"";y.type=(u.type)?u.type:"";y.zoom_level=(u.zoom_level)?u.zoom_level:"";y.folder=(u.folder)?u.folder:"";if(gv_marker_list_exists&&(u.type!="tickmark"||gv_marker_list_options.include_tickmarks)&&(u.type!="trackpoint"||gv_marker_list_options.include_trackpoints)&&!u.nolist){y.list_html=GV_Marker_List_Item(y,gv_marker_list_map_name,gv_marker_array_name+"["+(gv_marker_count-1)+"]");if(!gv_filter_marker_list||!c){if(gv_marker_list_options.limit&&gv_marker_list_options.limit>0&&gv_marker_list_count>=gv_marker_list_options.limit){}else{if(y.list_html!="undefined"){if(u.folder){gv_marker_list_folders[u.folder]=(gv_marker_list_folders[u.folder])?gv_marker_list_folders[u.folder]+y.list_html:y.list_html}else{gv_marker_list_html+=y.list_html}gv_marker_list_count+=1}}}}}if(!gv_filter_waypoints){S.addOverlay(y)}return y}function GV_Initialize_Marker_Tooltip(B){var A=document.createElement("div");A.id="gv_tooltip";A.style.visibility="hidden";B.getPane(G_MAP_FLOAT_PANE).appendChild(A);return(A)}function GV_Create_Marker_Tooltip(F,C){tooltip.innerHTML=C.tooltip;var B=F.getCurrentMapType().getProjection().fromLatLngToPixel(F.fromDivPixelToLatLng(new GPoint(0,0),true),F.getZoom());var G=F.getCurrentMapType().getProjection().fromLatLngToPixel(C.getPoint(),F.getZoom());var D=C.getIcon().iconAnchor;var E=C.getIcon().iconSize.width;var A=tooltip.clientHeight;G.x+=-1;G.y+=4;A=18;var H=new GControlPosition(G_ANCHOR_TOP_LEFT,new GSize(G.x-B.x-D.x+E,G.y-B.y-D.y-A));H.apply(tooltip);tooltip.style.visibility="visible"}function GV_Marker_List(){if(gv_marker_list_exists){var M=(gv_marker_list_options.header)?gv_marker_list_options.header:"";var H=(gv_marker_list_options.footer)?gv_marker_list_options.footer:"";var T=(gv_marker_list_options.dividers)?'<div class="gv_marker_list_border_top"></div>':"";var O="";gv_marker_list_folder_state=[];if(self.gv_marker_list_folders){var G=0;var J="http://maps.gpsvisualizer.com/google_maps/minus.gif";var F="http://maps.gpsvisualizer.com/google_maps/plus.gif";var B="http://maps.gpsvisualizer.com/google_maps/folder_triangle_open.gif";var U="http://maps.gpsvisualizer.com/google_maps/folder_triangle_closed.gif";var L=B;var P=U;var A="show/hide this folder's markers";var C="open/close this folder";var D=(gv_marker_list_options.folders_collapsed)?true:false;var N=(D)?P:L;var K=(D)?"none":"block";for(var E in gv_marker_list_folders){G+=1;gv_marker_list_folder_state[G]={collapsed:D,hidden:false};var Q="if(gv_marker_list_folder_state["+G+"].collapsed)";Q+=" { document.getElementById('folder_collapse_"+G+"').src='"+L+"'; document.getElementById('folder_contents_"+G+"').style.display='block'; gv_marker_list_folder_state["+G+"].collapsed = false; }";Q+=" else { document.getElementById('folder_collapse_"+G+"').src='"+P+"'; document.getElementById('folder_contents_"+G+"').style.display='none'; gv_marker_list_folder_state["+G+"].collapsed = true; }";var I="if(gv_marker_list_folder_state["+G+"].hidden)";I+=" { document.getElementById('folder_checkbox_"+G+"').checked = true; GV_Adjust_Opacity('folder_contents_"+G+"',100); GV_Adjust_Opacity('folder_name_"+G+"',100); GV_Toggle_Waypoints_With_Text({show:true,field:'folder',pattern:'^"+E.replace(/'/g,"\\'")+"$'}); gv_marker_list_folder_state["+G+"].hidden = false; }";I+="else { document.getElementById('folder_checkbox_"+G+"').checked = false; GV_Adjust_Opacity('folder_contents_"+G+"',30); GV_Adjust_Opacity('folder_name_"+G+"',40); GV_Toggle_Waypoints_With_Text({show:false,field:'folder',pattern:'^"+E.replace(/'/g,"\\'")+"$'}); gv_marker_list_folder_state["+G+"].hidden = true; }";var S="checked";var R='<div class="gv_marker_list_folder" id="folder_'+G+'">';R+='<div class="gv_marker_list_folder_name"><table cellspacing="0" cellpadding="0" border="0" width="100%"><tr valign="top">';R+='<td align="left" nowrap><img src="'+N+'" width="11" height="11" hspace="2" vspace="0" id="folder_collapse_'+G+'" style="cursor:pointer" title="'+C+'" onclick="'+Q+'"></td>';R+='<td align="left"><input type="checkbox" id="folder_checkbox_'+G+'" class="gv_marker_list_folder_checkbox" style="width:12px; height:12px; padding:0px; margin:0px 2px 0px 0px;" '+S+' title="'+A+'" onclick="'+I+'"></td>';R+='<td width="99%" align="left"><div id="folder_name_'+G+'" title="'+A+'" onclick="'+I+'" style="cursor:pointer; max-width:100%;">'+E+"</div></td>";if(gv_marker_list_options.folder_visibility_links&&1==2){R+='<td align="right" nowrap><img src="'+eye_visible+'" width="9" height="9" hspace="2" vspace="2" id="folder_toggle_graphic_'+G+'" style="cursor:pointer" title="'+A+'" onclick="'+toggle_graphic_onclick+'"></td>'}R+="</tr></table></div>";R+='<div class="gv_marker_list_folder_contents" id="folder_contents_'+G+'" style="display:'+K+'; max-width:100%;">'+gv_marker_list_folders[E]+"</div>";R+="</div>";O=O+R}}T=(!gv_marker_list_html)?"":T;gv_marker_list_div.innerHTML=M+T+O+gv_marker_list_html+H;gv_marker_list_count=0}if(document.getElementById(gv_marker_list_div_name+"_handle")&&document.getElementById(gv_marker_list_div_name+"_table")){if(!document.getElementById(gv_marker_list_div_name+"_handle").root){Drag.init(document.getElementById(gv_marker_list_div_name+"_handle"),document.getElementById(gv_marker_list_div_name+"_table"))}}}function GV_Marker_List_Item(c,g,C){var L=(gv_marker_list_options.default_color)?gv_marker_list_options.default_color:"";var S=(gv_marker_list_options.colors)?c.color:L;var F=(S)?"color:"+S:"";var E="";var A=(gv_marker_list_options.center)?g+".setCenter("+C+".coords); ":"";var Q="";if(gv_marker_list_options.zoom&&(gv_marker_list_options.zoom_level||c.zoom_level)){var Y=(c.zoom_level)?parseFloat(c.zoom_level):parseFloat(gv_marker_list_options.zoom_level);Q=g+".setZoom("+Y+"); "}else{if(gv_marker_list_options.zoom){Q=g+".zoomIn(); "}}var N=(gv_marker_list_options.center&&document.getElementById("gv_crosshair"))?"document.getElementById('gv_crosshair').style.display = 'none'; gv_crosshair_temporarily_hidden = true;":"";var W=(gv_marker_list_options.toggle)?"GV_Toggle_Marker("+g+","+C+",this,'"+S+"');":"";var T=(gv_marker_list_options.info_window&&!gv_marker_list_options.toggle)?"GEvent.trigger("+C+",'click'); ":"";var e=(gv_marker_list_options.info_window)?"GEvent.trigger("+C+",'click'); ":"";var f=(c.tooltip)?'onMouseOver="GV_Create_Marker_Tooltip('+g+","+C+');" ':"";var p=(c.tooltip)?"onMouseOut=\"tooltip.style.visibility = 'hidden';\" ":"";var O=E+W+Q+A+N+T;var X=E+Q+A+N+e;var B="";var b="";if(gv_marker_list_options.help_tooltips){B="Click to ";b="Click to ";if(A){B+="center + ";b+="center + "}if(Q){B+="zoom in + ";b+="zoom in + "}if(W){B+="hide/show the marker + "}if(gv_marker_list_options.url_links&&c.url){B+="open the marker's link + "}if(T){B+="open the info window"}if(e){b+="open the info window"}B=B.replace(/(Click to |, | \+ )$/,"");b=b.replace(/(Click to |, | \+ )$/,"")}var a="";if(c.thumbnail){var o=(gv_marker_list_options.thumbnails)?"display:block; ":"";var M=(c.thumbnail_width)?"width:"+c.thumbnail_width+"px; ":"";a='<div class="gv_marker_list_thumbnail" style="'+o+'"><img class="gv_wpt_thumbnail" src="'+c.thumbnail+'" style="'+M+o+'"></div>'}var J="";var h="";var G="";var R="";var V=4;if(!gv_marker_list_options.wrap_names){J="white-space:nowrap; ";h="nowrap"}if(1==2&&gv_marker_list_options.wrap_names&&gv_marker_list_options.icons){indent_style="margin-left:"+(c.width+V)+"px; text-indent:-"+(c.width+V)+"px "}var H="width:"+c.width+"px; height:"+c.height+"px";var I=(gv_marker_list_options.icons)?'<img title="'+b+'" class="icon" '+f+p+'onClick="'+X+'" style="'+H+'" src="'+c.image+'" alt="">':"";var K='<span title="'+B+'" '+f+p+'onClick="'+O+'" class="name" style="cursor:crosshair; '+F+';">'+c.name+a+"</span>";K=(gv_marker_list_options.url_links&&c.url)?'<a target="'+gv_marker_link_target+'" href="'+c.url+'" title="'+c.url+'">'+K+"</a>":K;var q=(c.shortdesc)?c.shortdesc:c.desc;var Z=(gv_marker_list_options.desc&&q)?'<div style="clear:both;"><span class="desc" style="'+F+'">'+q+"</span></div>":"";var P=(gv_marker_count!=1)?"":" gv_marker_list_first_item";var D=(gv_marker_list_options.dividers)?"gv_marker_list_border_bottom":"";var U='<div id="gv_list:'+C+'" class="gv_marker_list_item'+P+'"><table cellspacing="0" cellpadding="0" border="0"><tr valign="top" align="left"><td>'+I+'</td><td style="'+J+'" '+h+">"+K+Z+'</td></tr></table></div><div class="gv_marker_list_item_bottom '+D+'" style="clear:both;"></div>\n';return(U)}function GV_Toggle_Marker(D,A,C,E,B){if(A.gv_hidden){D.addOverlay(A);A.gv_hidden=false}else{D.removeOverlay(A);A.gv_hidden=true}if(E&&C.style.color){E=Color_Hex2CSS(E);B=(B)?Color_Hex2CSS(B):Color_Hex2CSS("#999999");if(A.gv_hidden){C.style.color=B}else{C.style.color=E}}}function GV_Toggle_All_Labels(marker_array_name,force_show){var label_visibility;if(force_show||(self.gv_hide_labels&&gv_hide_labels==true)){label_visibility="visible";gv_labels_are_visible=true;gv_hide_labels=false}else{label_visibility="hidden";gv_labels_are_visible=false;gv_hide_labels=true}if(eval("self."+marker_array_name)){var marker_array=eval(marker_array_name);if(marker_array&&marker_array.length>0){for(i=0;i<marker_array.length;i++){var label_id=marker_array_name+"_label["+i+"]";if(document.getElementById(label_id)){document.getElementById(label_id).parentNode.style.visibility=label_visibility}}}}}function GV_Toggle_Track_And_Label(map,id,color){if(!color){color=id;id=map;map=gmap}GV_Toggle_Overlays(map,eval(id));GV_Toggle_Label_Opacity(document.getElementById(id+"_label"),color)}function GV_Toggle_Overlays(map,overlay_array){if(google_api_version>=2){if(overlay_array.gv_hidden){if(!overlay_array.gv_oor){for(j=0;j<overlay_array.length;j++){map.addOverlay(overlay_array[j]);if(overlay_array[j].label_object){map.addOverlay(overlay_array[j].label_object)}}}overlay_array.gv_hidden=false}else{for(j=0;j<overlay_array.length;j++){map.removeOverlay(overlay_array[j]);if(overlay_array[j].label_object){map.removeOverlay(overlay_array[j].label_object)}}overlay_array.gv_hidden=true}}else{for(j=0;j<overlay_array.length;j++){var item=overlay_array[j];if(eval(item.drawElement)){if(item.drawElement.style.display=="none"){item.drawElement.style.display=""}else{item.drawElement.style.display="none"}}else{if(eval(item.images)){for(var i=0;i<item.images.length;i++){if(item.images[i].style.display=="none"){item.images[i].style.display=""}else{item.images[i].style.display="none"}}}}}}}function GV_Toggle_Label_Opacity(A,B){B=Color_Hex2CSS(B);current_color=Color_Hex2CSS(A.style.color);dimmed_color=Color_Hex2CSS("#aaaaaa");if(A.gv_hidden){A.gv_hidden=false;A.style.color=B}else{A.gv_hidden=true;A.style.color=dimmed_color}}function GV_Toggle(A){if(document.getElementById(A).style.display=="none"){document.getElementById(A).style.display=""}else{document.getElementById(A).style.display="none"}}function GV_Windowshade_Setup(A,B){if(document.getElementById(A)&&document.getElementById(B)){GEvent.addDomListener(document.getElementById(A),"dblclick",function(){if(document.getElementById(B).style.visibility=="hidden"){document.getElementById(B).style.visibility="visible";document.getElementById(B).style.display="block"}else{document.getElementById(A).style.width=(document.getElementById(B).parentNode.clientWidth-2)+"px";document.getElementById(B).style.visibility="hidden";document.getElementById(B).style.display="none"}})}}function GV_Filter_Tracks(map,info){if(info==null||info==undefined||typeof (info)!="object"){return false}var trk_array_name=(self.gv_options&&gv_options.track_array&&eval("self."+gv_options.track_array))?gv_options.track_array:"trk";var min_lat=map.getBounds().getSouthWest().lat();var min_lon=map.getBounds().getSouthWest().lng();var max_lat=map.getBounds().getNorthEast().lat();var max_lon=map.getBounds().getNorthEast().lng();if(max_lon<min_lon){min_lon=-180;max_lon=180}if(info[1]){for(var t in info){if(info[t]["bounds"]["e"]<min_lon||info[t]["bounds"]["w"]>max_lon||info[t]["bounds"]["n"]<min_lat||info[t]["bounds"]["s"]>max_lat){GV_Track_OutOfRange(map,eval(trk_array_name+"['"+t+"']"),true)}else{GV_Track_OutOfRange(map,eval(trk_array_name+"['"+t+"']"),false)}}}else{for(var t in info){if(info[t]["e"]<min_lon||info[t]["w"]>max_lon||info[t]["n"]<min_lat||info[t]["s"]>max_lat){GV_Track_OutOfRange(map,eval(t),true)}else{GV_Track_OutOfRange(map,eval(t),false)}}}}function GV_Track_OutOfRange(A,C,B){if(B){if(!C.gv_hidden){for(j=0;j<C.length;j++){A.removeOverlay(C[j])}}C.gv_oor=true}else{if(C.gv_oor){if(!C.gv_hidden){for(j=0;j<C.length;j++){A.addOverlay(C[j])}}}C.gv_oor=false}}function GV_Filter_Waypoints_With_Text(opts){if(!opts){opts={}}var map_name=opts.map||"gmap";var map=eval(map_name);if(!map){return false}var marker_array_name=opts.marker_array||"wpts";var wpt_array=eval(marker_array_name);if(!wpt_array){return false}var pattern=opts.pattern||"";var pattern_regexp=new RegExp(pattern,"i");var field=opts.field||"namedesc";if(field.indexOf("lat")==0){field="latitude"}else{if(field.indexOf("lon")==0||field.indexOf("lng")==0){field="longitude"}else{if(field.indexOf("desc")==0){field="desc"}}}var update_list=(gv_marker_filter_options.update_list)?true:false;var sort_list_by_distance=(gv_marker_filter_options.sort_list_by_distance)?true:false;var limit=(gv_marker_filter_options.limit>0)?gv_marker_filter_options.limit:0;if(gv_marker_list_exists&&update_list){gv_marker_list_html="";gv_marker_list_folders=[];gv_marker_list_count=0}var to_be_added=[];var gv_infowindow_open=false;if(map.getInfoWindow()&&map.getInfoWindow().isHidden()===false){gv_infowindow_open=true}for(j=0;j<wpt_array.length;j++){var w=wpt_array[j];map.removeOverlay(w);if(w.label_object){map.removeOverlay(w.label_object)}var text="";if(field=="latitude"){text=w.coords.lat().toString()}else{if(field=="longitude"){text=w.coords.lng().toString()}else{if(field=="coords"){text=w.coords.toString()}else{if(field=="namedesc"){text=w.name+"\t"+w.desc}else{if(w[field]){text=w[field]}}}}}if((pattern==""||text.match(pattern_regexp))&&!w.gv_hidden&&!w.gv_oor){if(limit>0||sort_list_by_distance){w.dist_from_center=map.getCenter().distanceFrom(w.coords);var key=(w.dist_from_center/10000000).toFixed(8);to_be_added.push(key+" "+j)}else{to_be_added.push(j)}}else{if(gv_infowindow_open&&self.gv_open_infowindow_index&&gv_open_infowindow_index==j){gv_infowindow_open=false}}}if(limit>0||(sort_list_by_distance&&update_list)){to_be_added=to_be_added.sort();if(limit>0&&limit<to_be_added.length){to_be_added.length=limit}for(j=0;j<to_be_added.length;j++){var parts=to_be_added[j].split(" ");to_be_added[j]=parseInt(parts[1])}if(!sort_list_by_distance){to_be_added=to_be_added.sort(function(a,b){return(a-b)})}}for(j=0;j<to_be_added.length;j++){var w=wpt_array[to_be_added[j]];if(!w.gv_hidden){map.addOverlay(w);if(w.label_object){map.addOverlay(w.label_object)}}if(gv_marker_list_exists&&update_list&&(w.type!="tickmark"||gv_marker_list_options.include_tickmarks)&&(w.type!="trackpoint"||gv_marker_list_options.include_trackpoints)&&!w.nolist){if(w.list_html!="undefined"){if(w.folder){gv_marker_list_folders[w.folder]=(gv_marker_list_folders[w.folder])?gv_marker_list_folders[w.folder]+w.list_html:w.list_html}else{gv_marker_list_html+=w.list_html}gv_marker_list_count+=1}}}if(gv_marker_list_exists){GV_Marker_List()}if(self.gv_labels_are_visible&&gv_labels_are_visible&&self.gv_options&&gv_options.marker_array){GV_Toggle_All_Labels(gv_options.marker_array,true)}if(gv_infowindow_open&&gv_open_infowindow_index!=null){GEvent.trigger(wpt_array[gv_open_infowindow_index],"click");GEvent.trigger(wpt_array[gv_open_infowindow_index],"mouseout")}}function GV_Toggle_Waypoints_With_Text(opts){if(!opts){opts={}}var map_name=opts.map||"gmap";var map=eval(map_name);if(!map){return false}var marker_array_name=opts.marker_array||"wpts";var wpt_array=eval(marker_array_name);if(!wpt_array){return false}var pattern=opts.pattern||"";var pattern_regexp=new RegExp(pattern,"i");var field=opts.field||"namedesc";if(field.indexOf("lat")==0){field="latitude"}else{if(field.indexOf("lon")==0||field.indexOf("lng")==0){field="longitude"}else{if(field.indexOf("desc")==0){field="desc"}}}var visible=(opts.show===false)?false:true;var to_be_changed=[];for(j=0;j<wpt_array.length;j++){var w=wpt_array[j];var text="";if(field=="latitude"){text=w.coords.lat().toString()}else{if(field=="longitude"){text=w.coords.lng().toString()}else{if(field=="coords"){text=w.coords.toString()}else{if(field=="namedesc"){text=w.name+"\t"+w.desc}else{if(w[field]){text=w[field]}}}}}if(pattern==""||text.match(pattern_regexp)){map.removeOverlay(w);if(w.label_object){map.removeOverlay(w.label_object)}to_be_changed.push(j)}}for(j=0;j<to_be_changed.length;j++){var w=wpt_array[to_be_changed[j]];if(visible&&!w.gv_hidden&&!w.gv_oor){map.addOverlay(w);if(w.label_object){map.addOverlay(w.label_object)}}else{map.removeOverlay(w);if(w.label_object){map.removeOverlay(w.label_object)}}}if(self.gv_labels_are_visible&&gv_labels_are_visible&&self.gv_options&&gv_options.marker_array){GV_Toggle_All_Labels(gv_options.marker_array,true)}}function GV_Filter_Waypoints_In_View(S,D){var R=(gv_marker_filter_options.limit>0)?gv_marker_filter_options.limit:0;var B=(gv_marker_filter_options.update_list)?true:false;var A=(gv_marker_filter_options.sort_list_by_distance)?true:false;var N=S.getBounds().getSouthWest().lat();var L=S.getBounds().getSouthWest().lng();var Q=S.getBounds().getNorthEast().lat();var P=S.getBounds().getNorthEast().lng();var E=S.getCenter();var G=S.getZoom();gv_marker_filter_moved_enough=true;if(gv_marker_filter_options.movement_threshold&&self.gv_marker_filter_last_position){var M=S.getCenter().distanceFrom(new GLatLng(S.getCenter().lat(),S.getBounds().getNorthEast().lng()))*2;var K=E.distanceFrom(gv_marker_filter_last_position);var H=K/M;var T=S.getContainer().clientWidth*H;if(gv_marker_filter_options.movement_threshold){if(G!=gv_marker_filter_last_zoom){gv_marker_filter_moved_enough=true}else{if(T<parseFloat(gv_marker_filter_options.movement_threshold)){gv_marker_filter_moved_enough=false}}}}if(gv_marker_filter_moved_enough){if(P<L){L=-180;P=180}if(gv_marker_list_exists&&B){gv_marker_list_html="";gv_marker_list_folders=[];gv_marker_list_count=0}var F=(gv_marker_filter_options.min_zoom&&gv_marker_filter_options.min_zoom>0)?gv_marker_filter_options.min_zoom:0;var J=(S.getZoom()>=F)?false:true;var C=[];for(j=0;j<D.length;j++){var I=D[j];S.removeOverlay(I);if(I.label_object){S.removeOverlay(I.label_object);I.gv_oor=true}if(J){}else{if(I.coords.lng()<L||I.coords.lng()>P||I.coords.lat()<N||I.coords.lat()>Q){}else{if(!R&&!B){C.push(j)}else{if(R>0||A){I.dist_from_center=S.getCenter().distanceFrom(I.coords);var U=(I.dist_from_center/10000000).toFixed(8);C.push(U+" "+j)}else{C.push(j)}}}}}if(J){if(S.getZoom()<F){if(gv_marker_list_options.zoom_message&&gv_marker_list_options.zoom_message!=""){gv_marker_list_html=gv_marker_list_options.zoom_message}else{if(gv_marker_filter_options.zoom_message&&gv_marker_filter_options.zoom_message!=""){gv_marker_list_html=gv_marker_filter_options.zoom_message}else{gv_marker_list_html="<p>Zoom in further to see markers.</p>"}}}}else{if(R>0||(A&&B)){C=C.sort();if(R>0&&R<C.length){C.length=R}for(j=0;j<C.length;j++){var O=C[j].split(" ");C[j]=parseInt(O[1])}if(!A){C=C.sort(function(W,V){return(W-V)})}}for(j=0;j<C.length;j++){var I=D[C[j]];if(!I.gv_hidden){S.addOverlay(I);I.gv_oor=false;if(I.label_object){S.addOverlay(I.label_object)}}if(gv_marker_list_exists&&B&&(I.type!="tickmark"||gv_marker_list_options.include_tickmarks)&&(I.type!="trackpoint"||gv_marker_list_options.include_trackpoints)&&!I.nolist){if(R>0&&gv_marker_list_count>=R){}else{if(I.list_html!="undefined"){if(I.folder){gv_marker_list_folders[I.folder]=(gv_marker_list_folders[I.folder])?gv_marker_list_folders[I.folder]+I.list_html:I.list_html}else{gv_marker_list_html+=I.list_html}gv_marker_list_count+=1}}}}}gv_marker_filter_last_position=S.getCenter();gv_marker_filter_last_zoom=S.getZoom()}}function GV_Filter_Waypoints(A,B){GV_Process_Waypoints(A,B)}function GV_Recenter_Per_URL(opts){var new_center=null;var new_zoom=null;var hide_crosshair=false;var map=(opts&&opts.map&&eval("self."+opts.map))?eval(opts.map):null;if(map==null){if(self.gmap){map=gmap}else{return false}}var center_key=(opts&&opts.center_key)?opts.center_key:"center";var zoom_key=(opts&&opts.zoom_key)?opts.zoom_key:"zoom";var default_zoom=(opts&&opts.default_zoom)?opts.default_zoom:null;var maptype_key=(opts&&opts.maptype_key)?opts.maptype_key:"maptype";var partial_match=(opts&&opts.partial_match)?true:false;var maptype_pattern=new RegExp("[&\\?]"+maptype_key+"=([A-Z0-9_]+)","i");if(document.location.toString().match(maptype_pattern)){var maptype_match=maptype_pattern.exec(document.location.toString());if(maptype_match&&maptype_match[1]){var t=unescape(maptype_match[1]);if(eval("self."+t)){map.setMapType(eval(t))}}}var zoom_pattern=new RegExp("[&\\?]"+zoom_key+"=([0-9]+)","i");if(document.location.toString().match(zoom_pattern)){var zoom_match=zoom_pattern.exec(document.location.toString());if(zoom_match&&zoom_match[1]){var z=unescape(zoom_match[1]);if(z.match(/[0-9]/)){z=parseFloat(z);if(z>19){z=19}if(z<0){z=0}new_zoom=z}}}var center_pattern=new RegExp("[&\\?]"+center_key+"=([^&]+)","i");if(document.location.toString().match(center_pattern)){var center_match=center_pattern.exec(document.location.toString());if(center_match&&center_match[1]){var c=center_match[1].replace(/\+/g," ");c=unescape(c);var coordinate_pattern=new RegExp("([NS])? *(-?[0-9]*.?[0-9]*) *([NS])? *, *([EW])? *(-?[0-9]*.?[0-9]*) *([EW])?","i");if(c.match(coordinate_pattern)){var coordinate_match=coordinate_pattern.exec(c.toUpperCase());if(coordinate_match&&coordinate_match[2]!=null&&coordinate_match[5]!=null){var lat=parseFloat(coordinate_match[2]);var lon=parseFloat(coordinate_match[5]);if(coordinate_match[1]=="S"||coordinate_match[3]=="S"){lat=0-lat}if(coordinate_match[4]=="W"||coordinate_match[6]=="W"){lon=0-lon}if(Math.abs(lat)<=90&&Math.abs(lon)<=180){new_center=new GLatLng(lat,lon)}}}else{var marker_array=(opts&&opts.marker_array&&eval("self."+opts.marker_array))?eval(opts.marker_array):null;if(marker_array==null){if(self.wpts){marker_array=wpts}else{return false}}if(partial_match){for(i=0;i<marker_array.length;i++){if(!new_center&&marker_array[i].name.toLowerCase().indexOf(c.toLowerCase())>-1){new_center=marker_array[i].coords;hide_crosshair=true}}}else{for(i=0;i<marker_array.length;i++){if(!new_center&&marker_array[i].name==c){new_center=marker_array[i].coords;hide_crosshair=true}}}}}}if(new_center){if(default_zoom&&!new_zoom){new_zoom=default_zoom}if(new_zoom){map.setCenter(new_center,new_zoom)}else{map.setCenter(new_center)}if(hide_crosshair&&document.getElementById("gv_crosshair")){document.getElementById("gv_crosshair").style.display="none";gv_crosshair_temporarily_hidden=true}return true}else{if(new_zoom){map.setZoom(new_zoom);return true}else{return false}}}function GV_Setup_Crosshair(B,A){if(!A.crosshair_container_id){A.crosshair_container_id="gv_crosshair_container"}if(!A.crosshair_graphic_id){A.crosshair_graphic_id="gv_crosshair"}if(!A.crosshair_width){A.crosshair_width=15}if(!A.center_coordinates_id){A.center_coordinates_id="gv_center_coordinates"}GV_Recenter_Crosshair(B,A.crosshair_container_id,A.crosshair_width);GV_Show_Center_Coordinates(B,A.center_coordinates_id);GEvent.addListener(B,"moveend",function(){GV_Show_Center_Coordinates(B,A.center_coordinates_id)});GEvent.addListener(B,"resize",function(){GV_Recenter_Crosshair(B,A.crosshair_container_id,A.crosshair_width);GV_Show_Center_Coordinates(B,A.center_coordinates_id)})}function GV_Show_Center_Coordinates(C,D){if(document.getElementById(D)){var B=C.getCenter().lat().toFixed(5);var A=C.getCenter().lng().toFixed(5);document.getElementById(D).innerHTML="Center: "+B+","+A}gv_last_center=C.getCenter()}var gv_crosshair_temporarily_hidden=true;function GV_Show_Hidden_Crosshair(A,B){if(self.gv_crosshair_temporarily_hidden&&(!self.gv_last_center||gv_last_center.lat()!=A.getCenter().lat()||gv_last_center.lng()!=A.getCenter().lng())){if(self.gv_hidden_crosshair_is_still_hidden&&gv_hidden_crosshair_is_still_hidden==true){}else{document.getElementById(B).style.display="block";gv_crosshair_temporarily_hidden=false}}}function GV_Recenter_Crosshair(D,C,B){if(document.getElementById(C)){if(document.getElementById(C).align){document.getElementById(C).style.position="absolute";document.getElementById(C).style.top=Math.round(D.getContainer().clientHeight/2-(B/2))+"px";document.getElementById(C).style.left=Math.round(D.getContainer().clientWidth/2-(B/2))+"px"}else{var A=Math.round(D.getContainer().clientWidth/2-(B/2));var E=Math.round(D.getContainer().clientHeight/2-(B/2));GV_Place_Control(D,C,G_ANCHOR_TOP_LEFT,A,E)}}}function GV_Place_Control(D,E,C,B,F){if(document.getElementById(E)){document.getElementById(E).style.display="block";var A=new GControlPosition(C,new GSize(B,F));A.apply(document.getElementById(E));D.getContainer().appendChild(document.getElementById(E))}}function GV_Remove_Control(A){if(document.getElementById(A)){document.getElementById(A).style.display="none";document.getElementById(A).parentNode.removeChild(document.getElementById(A))}}function GV_Adjust_Opacity(C,B){if(B<1){B=B*100}if(document.getElementById(C)){var A=document.getElementById(C);A.style.filter="alpha(opacity="+B+")";A.style.MozOpacity=B/100;A.style.KhtmlOpacity=B/100}}function GV_Background_Opacity(map,opacity){if(opacity==null){return }if(opacity<=0){opacity=0}else{if(opacity>1){opacity=opacity/100}}gv_bg_opacity=opacity;var screen_opacity=1-opacity;var id="gv_opacity_screen";if(!document.getElementById(id)){var new_screen=document.createElement("div");new_screen.id=id;new_screen.className="gmnoprint gv_opacity_screen";new_screen.style.position="absolute";new_screen.style.opacity=screen_opacity;new_screen.style.filter="alpha(opacity="+screen_opacity*100+")";new_screen.style.KhtmlOpacity=screen_opacity;new_screen.style.MozOpacity=screen_opacity;map.getPane(G_MAP_MAP_PANE).appendChild(new_screen);GEvent.addListener(map,"moveend",function(){GV_Background_Opacity(map,eval("gv_bg_opacity"))})}GV_Update_Background_Screen(map,id,screen_opacity)}function GV_Update_Background_Screen(A,B,H){if(A&&document.getElementById(B)&&H!=null){var J=document.getElementById(B);var D=3;var G=A.getSize().width;var I=A.getSize().height;var F=new GLatLng(A.getBounds().getNorthEast().lat(),A.getBounds().getSouthWest().lng());var C=A.fromLatLngToDivPixel(F);J.style.visibility=(H==0)?"hidden":"visible";J.style.opacity=H;J.style.filter="alpha(opacity="+H*100+")";J.style.KhtmlOpacity=H;J.style.MozOpacity=H;J.style.left=C.x-(G*((D-1)/2))+"px";J.style.top=C.y-(I*((D-1)/2))+"px";J.style.width=D*G+"px";J.style.height=D*I+"px";if(document.getElementById("gv_opacity_selector")){var E=document.getElementById("gv_opacity_selector");for(i=0;i<E.length;i++){if(E[i].value!=""&&E[i].value==Math.round(100*(1-H))/100){E.selectedIndex=i}}}}}function GV_Fill_Window_With_Map(A){if(!document.getElementById(A)){return false}var C=document.getElementById(A);var B=GV_GetWindowSize();C.style.position="absolute";C.style.left="0px";C.style.top="0px";C.style.width=B[0]+"px";C.style.height=B[1]+"px"}function GV_GetWindowSize(){var A,B;if(window.innerHeight){A=window.innerWidth;B=window.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientWidth;B=document.documentElement.clientHeight}else{if(document.body){A=document.body.clientWidth;B=document.body.clientHeight}}}return[A,B]}function GV_MouseWheel(A){if(!A||!self.gmap){return false}if(A.detail){if(A.detail<0){gmap.zoomIn()}else{if(A.detail>0){gmap.zoomOut()}}}else{if(A.wheelDelta){if(A.wheelDelta>0){gmap.zoomIn()}else{if(A.wheelDelta<0){gmap.zoomOut()}}}}}function GV_MouseWheelReverse(A){if(!A||!self.gmap){return false}if(A.detail){if(A.detail<0){gmap.zoomOut()}else{if(A.detail>0){gmap.zoomIn()}}}else{if(A.wheelDelta){if(A.wheelDelta>0){gmap.zoomOut()}else{if(A.wheelDelta<0){gmap.zoomIn()}}}}}function Color_Hex2CSS(B){if(B==null){return null}var A=[];A=B.match(/([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})/i);if(A){return("rgb("+parseInt(A[1],16)+","+parseInt(A[2],16)+","+parseInt(A[3],16)+")")}else{return(B.replace(/ +/g,""))}}function GV_Color_Name2Hex(A){if(A.match(/^#[A-F0-9][A-F0-9][A-F0-9][A-F0-9][A-F0-9][A-F0-9]$/i)){return A}var B=A.replace(/^\#/,"");if(gv_named_html_colors[B]){return gv_named_html_colors[B]}else{return B}}function GV_Define_Named_Colors(){var A=[];A.aliceblue="#f0f8ff";A.antiquewhite="#faebd7";A.aqua="#00ffff";A.aquamarine="#7fffd4";A.azure="#f0ffff";A.beige="#f5f5dc";A.bisque="#ffe4c4";A.black="#000000";A.blanchedalmond="#ffebcd";A.blue="#0000ff";A.blueviolet="#8a2be2";A.brown="#a52a2a";A.burlywood="#deb887";A.cadetblue="#5f9ea0";A.chartreuse="#7fff00";A.chocolate="#d2691e";A.coral="#ff7f50";A.cornflowerblue="#6495ed";A.cornsilk="#fff8dc";A.crimson="#dc143c";A.cyan="#00ffff";A.darkblue="#00008b";A.darkcyan="#008b8b";A.darkgoldenrod="#b8860b";A.darkgray="#a9a9a9";A.darkgreen="#006400";A.darkkhaki="#bdb76b";A.darkmagenta="#8b008b";A.darkolivegreen="#556b2f";A.darkorange="#ff8c00";A.darkorchid="#9932cc";A.darkred="#8b0000";A.darksalmon="#e9967a";A.darkseagreen="#8fbc8f";A.darkslateblue="#483d8b";A.darkslategray="#2f4f4f";A.darkturquoise="#00ced1";A.darkviolet="#9400d3";A.deeppink="#ff1493";A.deepskyblue="#00bfff";A.dimgray="#696969";A.dodgerblue="#1e90ff";A.firebrick="#b22222";A.floralwhite="#fffaf0";A.forestgreen="#228b22";A.fuchsia="#ff00ff";A.gainsboro="#dcdcdc";A.ghostwhite="#f8f8ff";A.gold="#ffd700";A.goldenrod="#daa520";A.gray="#808080";A.grey="#808080";A.green="#008000";A.greenyellow="#adff2f";A.honeydew="#f0fff0";A.hotpink="#ff69b4";A.indianred="#cd5c5c";A.indigo="#4b0082";A.ivory="#fffff0";A.khaki="#f0e68c";A.lavender="#e6e6fa";A.lavenderblush="#fff0f5";A.lawngreen="#7cfc00";A.lemonchiffon="#fffacd";A.lightblue="#add8e6";A.lightcoral="#f08080";A.lightcyan="#e0ffff";A.lightgoldenrodyellow="#fafad2";A.lightgreen="#90ee90";A.lightgrey="#d3d3d3";A.lightpink="#ffb6c1";A.lightsalmon="#ffa07a";A.lightseagreen="#20b2aa";A.lightskyblue="#87cefa";A.lightslategray="#778899";A.lightsteelblue="#b0c4de";A.lightyellow="#ffffe0";A.lime="#00ff00";A.limegreen="#32cd32";A.linen="#faf0e6";A.magenta="#ff00ff";A.maroon="#800000";A.mediumaquamarine="#66cdaa";A.mediumblue="#0000cd";A.mediumorchid="#ba55d3";A.mediumpurple="#9370db";A.mediumseagreen="#3cb371";A.mediumslateblue="#7b68ee";A.mediumspringgreen="#00fa9a";A.mediumturquoise="#48d1cc";A.mediumvioletred="#c71585";A.midnightblue="#191970";A.mintcream="#f5fffa";A.mistyrose="#ffe4e1";A.moccasin="#ffe4b5";A.navajowhite="#ffdead";A.navy="#000080";A.oldlace="#fdf5e6";A.olive="#808000";A.olivedrab="#6b8e23";A.orange="#ffa500";A.orangered="#ff4500";A.orchid="#da70d6";A.palegoldenrod="#eee8aa";A.palegreen="#98fb98";A.paleturquoise="#afeeee";A.palevioletred="#db7093";A.papayawhip="#ffefd5";A.peachpuff="#ffdab9";A.peru="#cd853f";A.pink="#ffc0cb";A.plum="#dda0dd";A.powderblue="#b0e0e6";A.purple="#800080";A.red="#ff0000";A.rosybrown="#bc8f8f";A.royalblue="#4169e1";A.saddlebrown="#8b4513";A.salmon="#fa8072";A.sandybrown="#f4a460";A.seagreen="#2e8b57";A.seashell="#fff5ee";A.sienna="#a0522d";A.silver="#c0c0c0";A.skyblue="#87ceeb";A.slateblue="#6a5acd";A.slategray="#708090";A.snow="#fffafa";A.springgreen="#00ff7f";A.steelblue="#4682b4";A.tan="#d2b48c";A.teal="#008080";A.thistle="#d8bfd8";A.tomato="#ff6347";A.turquoise="#40e0d0";A.violet="#ee82ee";A.wheat="#f5deb3";A.white="#ffffff";A.whitesmoke="#f5f5f5";A.yellow="#ffff00";A.yellowgreen="#9acd32";return(A)}if(google_api_version>=2){USGS_TOPO_TILES=WMSCreateMap([{name:"Topo",copyright:"Topo maps by USGS via terraserver-usa.com",errorMessage:"Topo maps unavailable",minResolution:5,maxResolution:17,tileSize:400,baseUrl:"http://terraservice.net/ogcmap6.ashx?version=1.1.1&request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&bgcolor=0xCCCCCC&exceptions=INIMAGE&layers=DRG"}]);USGS_AERIAL_TILES=WMSCreateMap([{name:"Aerial",copyright:"Imagery by USGS via terraserver-usa.com",errorMessage:"USGS aerial imagery unavailable",minResolution:7,maxResolution:18,tileSize:400,baseUrl:"http://terraservice.net/ogcmap6.ashx?version=1.1.1&request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&bgcolor=0xCCCCCC&exceptions=INIMAGE&layers=DOQ"}]);USGS_AERIAL_HYBRID_TILES=WMSCreateMap([{name:"Aerial+G.",copyright:"Imagery by USGS via terraserver-usa.com",errorMessage:"USGS aerial imagery unavailable",minResolution:7,maxResolution:18,tileSize:256,baseUrl:"http://terraservice.net/ogcmap6.ashx?version=1.1.1&request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&bgcolor=0xCCCCCC&exceptions=INIMAGE&layers=DOQ",foreground:"G_HYBRID_MAP"}]);NRCAN_TOPO_TILES=WMSCreateMap([{name:"NRCan",copyright:"Maps by NRCan.gc.ca",errorMessage:"NRCan maps unavailable",minResolution:6,maxResolution:18,tileSize:600,baseUrl:"http://wms.cits.rncan.gc.ca/cgi-bin/cubeserv.cgi?version=1.1.3&request=GetMap&format=image/png&bgcolor=0xFFFFFF&exceptions=application/vnd.ogc.se_inimage&srs=EPSG:4326&layers=PUB_50K:CARTES_MATRICIELLES/RASTER_MAPS"}]);NRCAN_TOPO_NAMES_TILES=WMSCreateMap([{name:"NRCan+",copyright:"Maps by NRCan.gc.ca",errorMessage:"NRCan maps unavailable",minResolution:11,maxResolution:18,tileSize:600,baseUrl:"http://wms.cits.rncan.gc.ca/cgi-bin/cubeserv.cgi?version=1.1.3&request=GetMap&format=image/png&bgcolor=0xFFFFFF&exceptions=application/vnd.ogc.se_inimage&srs=EPSG:4326&layers=PUB_50K:CARTES_MATRICIELLES/RASTER_MAPS,TOPONYME_0:BNDT_50K/NTDB_50K"}]);NRCAN_TOPO_HYBRID_TILES=WMSCreateMap([{name:"NRCan+G.",copyright:"Topo maps by NRCan.gc.ca",errorMessage:"NRCan maps unavailable",minResolution:11,maxResolution:18,tileSize:256,baseUrl:"http://wms.cits.rncan.gc.ca/cgi-bin/cubeserv.cgi?version=1.1.3&request=GetMap&format=image/png&bgcolor=0xFFFFFF&exceptions=application/vnd.ogc.se_inimage&srs=EPSG:4326&layers=PUB_50K:CARTES_MATRICIELLES/RASTER_MAPS",foreground:"G_HYBRID_MAP"}]);NEXRAD_TILES=WMSCreateMap([{name:"NEXRAD",copyright:"NEXRAD imagery from Iowa Environmental Mesonet",errorMessage:"NEXRAD imagery unavailable",minResolution:3,maxResolution:14,tileSize:256,baseUrl:"http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi?version=1.1.1&request=GetMap&service=WMS&srs=EPSG:4326&format=image/png&transparent=true&styles=&layers=nexrad-n0r",opacity:0.7,background:"G_PHYSICAL_MAP"}]);LANDSAT_TILES=WMSCreateMap([{name:"Landsat",copyright:"Map by NASA",errorMessage:"OnEarth server unavailable",minResolution:3,maxResolution:15,tileSize:260,baseUrl:"http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&layers=global_mosaic"}]);BLUEMARBLE_TILES=WMSCreateMap([{name:"BlueMarble",copyright:"Map by NASA",errorMessage:"OnEarth server unavailable",minResolution:3,maxResolution:8,tileSize:260,baseUrl:"http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&layers=modis"}]);DAILY_TERRA_TILES=WMSCreateMap([{name:'"Terra"',copyright:"Map by NASA",errorMessage:"OnEarth server unavailable",minResolution:3,maxResolution:10,tileSize:260,baseUrl:"http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&layers=daily_terra"}]);DAILY_AQUA_TILES=WMSCreateMap([{name:'"Aqua"',copyright:"Map by NASA",errorMessage:"OnEarth server unavailable",minResolution:3,maxResolution:10,tileSize:260,baseUrl:"http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&layers=daily_aqua"}]);DAILY_MODIS_TILES=WMSCreateMap([{name:"MODIS",copyright:"Map by NASA",errorMessage:"OnEarth server unavailable",minResolution:3,maxResolution:10,tileSize:260,baseUrl:"http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&styles=&srs=EPSG:4326&format=image/jpeg&layers=daily_planet"}]);SRTM_COLOR_TILES=WMSCreateMap([{name:"SRTM",copyright:"SRTM elevation data by NASA",errorMessage:"SRTM elevation data unavailable",minResolution:6,maxResolution:14,tileSize:260,baseUrl:"http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&srs=EPSG:4326&format=image/jpeg&styles=&layers=huemapped_srtm"}]);MYTOPO_TILES=MyTopoCreateMap()}function GV_Add_Custom_Layers(A){A.addMapType(MYTOPO_TILES);A.addMapType(USGS_TOPO_TILES);A.addMapType(USGS_AERIAL_TILES);A.addMapType(USGS_AERIAL_HYBRID_TILES);A.addMapType(NEXRAD_TILES);A.addMapType(NRCAN_TOPO_TILES);A.addMapType(NRCAN_TOPO_NAMES_TILES);A.addMapType(NRCAN_TOPO_HYBRID_TILES);A.addMapType(LANDSAT_TILES);A.addMapType(BLUEMARBLE_TILES);A.addMapType(DAILY_TERRA_TILES);A.addMapType(DAILY_AQUA_TILES);A.addMapType(DAILY_MODIS_TILES);A.addMapType(SRTM_COLOR_TILES)}function GV_MapTypeControl(A){this.control_style=(A&&A.style!=null)?A.style:gv_maptypecontrol_style;this.filter_map_types=(A&&A.filter!=null)?A.filter:gv_filter_map_types;this.excluded_map_types=(A&&A.excluded!=null)?A.excluded:this.excluded_map_types}if(google_api_version>=2){GV_MapTypeControl.prototype=new GControl();GV_MapTypeControl.prototype.getDefaultPosition=function(){return new GControlPosition(G_ANCHOR_TOP_RIGHT,new GSize(7,7))};GV_MapTypeControl.prototype.initialize=function(map){GV_Add_Custom_Layers(map);var map_types=[];map_types.push({label:"G. map",type:"G_NORMAL_MAP",title:"Google street map",bounds:[-180,-90,180,90],excluded:[]},{label:"G. satellite",type:"G_SATELLITE_MAP",title:"Google satellite map",bounds:[-180,-90,180,90],excluded:[]},{label:"G. hybrid",type:"G_HYBRID_MAP",title:'Google "hybrid" map',bounds:[-180,-90,180,90],excluded:[]});if(self.G_PHYSICAL_MAP){map_types.push({label:"G. terrain",type:"G_PHYSICAL_MAP",title:"Google terrain map",bounds:[-180,-90,180,90],excluded:[]})}map_types.push({label:"U.S./Can.: MyTopo",type:"MYTOPO_TILES",title:"Canadian topo tiles from MyTopo.com",bounds:[-141,22,-52,85],excluded:[],country:"us,ca"},{label:"USGS topo",type:"USGS_TOPO_TILES",title:"USGS topographic map",bounds:[-169,18,-66,72],excluded:[],country:"us"},{label:"USGS aerial",type:"USGS_AERIAL_TILES",title:"USGS aerial photos (black/white)",bounds:[-152,17,-65,65],excluded:[],country:"us"},{label:"USGS aerial+G.",type:"USGS_AERIAL_HYBRID_TILES",title:"USGS aerial photos (black/white) + Google street map",bounds:[-152,17,-65,65],excluded:[],country:"us"},{label:"U.S. Nexrad",type:"NEXRAD_TILES",title:"United States NEXRAD weather radar",bounds:[-152,17,-65,65],excluded:[],country:"us"},{label:"Canada NRCan",type:"NRCAN_TOPO_TILES",title:"NRCan/Toporama maps with contour lines",bounds:[-141,41.7,-52,85],excluded:[-141,41.7,-86,48],country:"ca"},{label:"Can. NRCan+names",type:"NRCAN_TOPO_NAMES_TILES",title:"NRCan topo maps with feature names",bounds:[-141,41.7,-52,85],excluded:[-141,41.7,-86,48],country:"ca"},{label:"Can. NRCan + G.",type:"NRCAN_TOPO_HYBRID_TILES",title:"NRCan topo maps with Google street names",bounds:[-141,41.7,-52,85],excluded:[-141,41.7,-86,48],country:"ca"},{label:"Landsat 30m",type:"LANDSAT_TILES",title:"NASA Landsat 30-meter imagery",bounds:[-180,-90,180,90],excluded:[]},{label:"Blue Marble",type:"BLUEMARBLE_TILES",title:'NASA "Visible Earth" image',bounds:[-180,-90,180,90],excluded:[]},{label:"Daily MODIS",type:"DAILY_MODIS_TILES",title:"Daily imagery from Nasa's MODIS satellites",bounds:[-180,-90,180,90],excluded:[]},{label:"SRTM elevation",type:"SRTM_COLOR_TILES",title:"SRTM elevation data, as color",bounds:[-180,-90,180,90],excluded:[]});if(self.gv_custom_map_types&&gv_custom_map_types.length>0){for(j=0;j<gv_custom_map_types.length;j++){map_types.push(gv_custom_map_types[j])}}var center_lat=map.getCenter().lat();var center_lng=map.getCenter().lng();var excluded_maps=new Array;if(this.filter_map_types&&this.excluded_map_types){for(j=0;j<this.excluded_map_types.length;j++){excluded_maps[this.excluded_map_types[j]]=true}}for(j=0;j<map_types.length;j++){if(self.gv_country&&gv_country){if(map_types[j]["country"]&&map_types[j]["country"].indexOf(gv_country)<0){excluded_maps[map_types[j]["type"]]=true}}else{if(!(center_lng>=map_types[j]["bounds"][0]&&center_lat>=map_types[j]["bounds"][1]&&center_lng<=map_types[j]["bounds"][2]&&center_lat<=map_types[j]["bounds"][3])||(center_lng>=map_types[j]["excluded"][0]&&center_lat>=map_types[j]["excluded"][1]&&center_lng<=map_types[j]["excluded"][2]&&center_lat<=map_types[j]["excluded"][3])){excluded_maps[map_types[j]["type"]]=true}}}if(this.control_style=="menu"){var map_selector=document.createElement("select");map_selector.id="gv_map_selector";map_selector.title="Choose a background map";map_selector.style.font="10px Verdana";map_selector.style.backgroundColor="#FFFFFF";for(j=0;j<map_types.length;j++){if(!this.filter_map_types||!excluded_maps[map_types[j]["type"]]){var opt=document.createElement("option");opt.value=map_types[j]["type"];opt.appendChild(document.createTextNode(map_types[j]["label"]));map_selector.appendChild(opt);if(map.getCurrentMapType()==eval(opt.value)){map_selector.selectedIndex=map_selector.length-1}}}GEvent.addDomListener(map_selector,"change",function(){map.setMapType(eval(this.value))});map.getContainer().appendChild(map_selector);return map_selector}else{var map_type_container=document.createElement("div");for(j=0;j<map_types.length;j++){var map_ok=true;if(this.filter_map_types&&!(center_lng>=map_types[j]["bounds"][0]&&center_lat>=map_types[j]["bounds"][1]&&center_lng<=map_types[j]["bounds"][2]&&center_lat<=map_types[j]["bounds"][3])||(center_lng>=map_types[j]["excluded"][0]&&center_lat>=map_types[j]["excluded"][1]&&center_lng<=map_types[j]["excluded"][2]&&center_lat<=map_types[j]["excluded"][3])){map_ok=false}if(self.gv_country&&gv_country&&map_types[j]["country"]&&map_types[j]["country"].indexOf(gv_country)<0){map_ok=false}if(excluded_maps[map_types[j]["type"]]){map_ok=false}if(map_ok){var maplink=document.createElement("div");maplink.className="gv_maptypelink";if(self.gv_maptypecontrol&&map.getCurrentMapType()==eval(map_types[j]["type"])){maplink.className="gv_maptypelink gv_maptypelink_selected"}maplink.title=map_types[j]["title"];maplink.type=map_types[j]["type"];map_type_container.appendChild(maplink);maplink.appendChild(document.createTextNode(map_types[j]["label"]));GEvent.addDomListener(maplink,"click",function(){map.setMapType(eval(this.type));if(self.gv_maptypecontrol){map.removeControl(gv_maptypecontrol);map.addControl(gv_maptypecontrol)}})}}map.getContainer().appendChild(map_type_container);return map_type_container}}}function WMSCreateMap(layer_info,copyright,errorMessage,minResolution,maxResolution,tileSize,baseUrl){var array_input=(layer_info[0]!=undefined&&layer_info[0]["name"]!=undefined)?1:0;var layers=[];if(!array_input){layers[0]=[];layers[0]["name"]=layer_info;layers[0]["copyright"]=copyright;layers[0]["errorMessage"]=errorMessage;layers[0]["minResolution"]=minResolution;layers[0]["maxResolution"]=maxResolution;layers[0]["tileSize"]=tileSize;layers[0]["baseUrl"]=baseUrl}else{layers=layer_info}var tileLayers=[];for(j=0;j<layers.length;j++){var mi=layers[j];var tileLayer=new GTileLayer(new GCopyrightCollection(mi.copyright),mi.minResolution,mi.maxResolution);tileLayer.baseUrl=mi.baseUrl;tileLayer.tileSize=mi.tileSize;tileLayer.getTileUrl=WMSGetTileUrl;tileLayer.getCopyright=function(){return{prefix:"",copyrightTexts:[mi.copyright]}};if(mi.opacity!=undefined){tileLayer.getOpacity=function(){return mi.opacity}}if(mi.background!=undefined){var bg_layers=eval(mi.background+".getTileLayers()");for(var i in bg_layers){if(mi.bg_opacity!=undefined){bg_layers[i].getOpacity=function(){return mi.bg_opacity}}tileLayers.push(bg_layers[i])}}tileLayers.push(tileLayer);if(mi.foreground!=undefined){var fg_layers=eval(mi.foreground+".getTileLayers()");for(var i=0;i<fg_layers.length;i++){if(mi.foreground!="G_HYBRID_MAP"||(mi.foreground=="G_HYBRID_MAP"&&i==(fg_layers.length-1))){tileLayers.push(fg_layers[i])}}}}return new GMapType(tileLayers,G_SATELLITE_MAP.getProjection(),mi.name,{errorMessage:mi.errorMessage,tileSize:mi.tileSize})}function WMSGetTileUrl(F,E){var H=new GPoint(F.x*this.tileSize,(F.y+1)*this.tileSize);var A=new GPoint((F.x+1)*this.tileSize,F.y*this.tileSize);var D=G_NORMAL_MAP.getProjection().fromPixelToLatLng(H,E);var B=G_NORMAL_MAP.getProjection().fromPixelToLatLng(A,E);var G=D.lng()+","+D.lat()+","+B.lng()+","+B.lat();var C=(this.baseUrl.indexOf("onearth.jpl.nasa.gov")>-1&&this.tileSize==256)?257:this.tileSize;return this.baseUrl+"&bbox="+G+"&width="+C+"&height="+C}function MyTopoCreateMap(){var map_name=(self.gv_options&&gv_options.map)?gv_options.map:"gmap";var map=eval("self."+map_name);var affiliate_id="gpsvisualizer";var minResolution=7;var maxResolution=17;var s=-90;var w=-180;var n=90;var e=180;var copyright='Topo maps &#169; <a href="http://www.mytopo.com/?pid='+affiliate_id+"\" target=\"_blank\" onclick=\"if(this.href.toString().indexOf('&lat=')>-1){this.href=this.href.toString().replace(/&lat=-?\\d+\\.?\\d*/,'&lat='+"+map_name+".getCenter().lat()).replace(/&lon=-?\\d+\\.?\\d*/,'&lon='+"+map_name+".getCenter().lng());}else{this.href+='&lat='+"+map_name+".getCenter().lat()+'&lon='+"+map_name+'.getCenter().lng();}">MyTopo.com</a>';var tileLayer=new GTileLayer(new GCopyrightCollection(copyright),minResolution,maxResolution,{isPng:true,tileUrlTemplate:"http://maps1.mytopo.com/"+affiliate_id+"/tilecache.cgi/1.0.0/topoG/{Z}/{X}/{Y}.png"});tileLayer.getCopyright=function(){return copyright};tileLayer.layer="MyTopo.com";var tileLayers=[tileLayer];return new GMapType(tileLayers,G_SATELLITE_MAP.getProjection(),"MyTopo",{errorMessage:"MyTopo tiles unavailable",tileSize:256})}function GV_MapOpacityControl(A){this.initial_opacity=(A!=null)?parseFloat(A):100}if(google_api_version>0){GV_MapOpacityControl.prototype=new GControl();GV_MapOpacityControl.prototype.getDefaultPosition=function(){var A=6;if(document.getElementById("gv_map_selector")){A=document.getElementById("gv_map_selector").offsetWidth+7+4}else{if(self.gv_maptypecontrol&&gv_maptypecontrol){A=200}}return new GControlPosition(G_ANCHOR_TOP_RIGHT,new GSize(A,7))};GV_MapOpacityControl.prototype.initialize=function(C){var B=document.createElement("select");B.id="gv_opacity_selector";B.title="Adjust the background map's opacity";B.style.font="10px Verdana";B.style.backgroundColor="#FFFFFF";var A=document.createElement("option");A.value="1";A.appendChild(document.createTextNode("opacity"));B.appendChild(A);for(j=0;j<=10;j++){var A=document.createElement("option");A.value=j/10;A.appendChild(document.createTextNode(j*10+"%"));B.appendChild(A)}GEvent.addDomListener(B,"change",function(){GV_Background_Opacity(C,this.value)});C.getContainer().appendChild(B);GV_Background_Opacity(C,this.initial_opacity);return B}}function GV_Add_Track_to_Tracklist(opts){if(!opts||!opts.name||!document.getElementById("gv_tracklist_links")){return false}if(self.gv_options&&gv_options.tracklist_options&&gv_options.tracklist_options["tracklist"]===false){return false}var tracklinks=document.getElementById("gv_tracklist_links");if(self.gv_options&&gv_options.tracklist_options&&gv_options.tracklist_options["max_width"]>0){tracklinks.style.maxWidth=gv_options.tracklist_options["max_width"]+"px"}var tracklist_background_color=(document.getElementById("gv_tracklist"))?Color_Hex2CSS(document.getElementById("gv_tracklist").style.backgroundColor).replace(/ /g,""):Color_Hex2CSS("#FFFFFF").replace(/ /g,"");var this_color_as_css=Color_Hex2CSS(GV_Color_Name2Hex(opts.color)).replace(/ /g,"");var alternate_color=(tracklist_background_color=="rgb(204,204,204)")?"#999999":"#CCCCCC";if(tracklist_background_color==this_color_as_css){opts.color=alternate_color}if(opts.desc){opts.desc=opts.desc.replace(/"/g,"&amp;quot;")}var show_desc=(self.gv_options&&gv_options.tracklist_options&&gv_options.tracklist_options["desc"])?true:false;var id_escaped=opts.id.replace(/'/g,"\\'");var html="";html+='<div class="gv_tracklist_item"><table cellspacing="0" cellpadding="0" border="0">';html+='<tr valign="top">';html+='<td class="gv_tracklist_bullet">'+opts.bullet.replace(/ <\//g,"&nbsp;</").replace(/ $/,"&nbsp;")+"</td>";html+='<td class="gv_tracklist_name">';if(show_desc){html+='<span id="'+opts.id+'_label" style="color:'+opts.color+'; cursor:pointer;" onclick="GV_Toggle_Track_And_Label('+opts.map_name+",'"+id_escaped+"','"+opts.color+"');\" onmouseover=\"this.style.textDecoration='underline';\" onmouseout=\"this.style.textDecoration='none';\">"+opts.name+"</span>"}else{html+='<span id="'+opts.id+'_label" class="gv_tracklist_name" style="color:'+opts.color+'; cursor:pointer;" onclick="GV_Toggle_Track_And_Label('+opts.map_name+",'"+id_escaped+"','"+opts.color+"');\" onmouseover=\"this.style.textDecoration='underline'; GV_Tracklist_Tooltip_Show('"+id_escaped+"_label','"+eval(opts.map_name).getContainer().id+"');\" onmouseout=\"this.style.textDecoration='none'; GV_Tracklist_Tooltip_Hide('"+id_escaped+'_label\');" title="'+opts.desc+'">'+opts.name+"</span>"}html+="</td>";html+="</tr>";if(show_desc&&opts.desc){html+='<tr valign="top"><td></td><td class="gv_tracklist_desc">'+opts.desc+"</td></tr>"}html+="</table></div>";tracklinks.innerHTML+=html;if(self.gv_options&&gv_options.tracklist_options&&gv_options.tracklist_options["max_width"]&&gv_options.tracklist_options["id"]&&document.getElementById(gv_options.tracklist_options["id"]+"_table")){var tracklist_table=document.getElementById(gv_options.tracklist_options["id"]+"_table");if(tracklist_table.clientWidth>gv_options.tracklist_options["max_width"]){tracklist_table.style.width=gv_options.tracklist_options["max_width"]+"px"}}if(self.gv_options&&gv_options.tracklist_options&&gv_options.tracklist_options["max_height"]&&gv_options.tracklist_options["id"]&&document.getElementById(gv_options.tracklist_options["id"])){var tracklist=document.getElementById(gv_options.tracklist_options["id"]);if(tracklist.clientHeight>gv_options.tracklist_options["max_height"]){tracklist.style.height=gv_options.tracklist_options["max_height"]+"px"}}}function GV_Tracklist_Tooltip_Show(L,C){var F,H,N,I;if(!C){C="gmap_div"}if(document.getElementById(L)){N=document.getElementById(L)}else{return false}if(document.getElementById(C)){F=document.getElementById(C)}else{return false}if(document.getElementById("gv_legend_tooltip")){I=document.getElementById("gv_legend_tooltip")}else{if(document.getElementById("gv_tracklist_tooltip")){I=document.getElementById("gv_tracklist_tooltip")}else{return false}}if(N.title&&!N.description){N.description=N.title;N.title=""}if(N&&I&&N.description){I.innerHTML=N.description;I.style.position="absolute";I.style.zIndex=-99999;I.style.display="block";var A=findPos(F);var G=findPos(N);var K=N.offsetHeight||12;var E=A[0]+parseInt(F.offsetWidth);var B=parseInt(I.style.padding);var J=parseInt(I.style.borderWidth);var D=parseInt(I.style.width)||I.clientWidth||200;var M=parseInt(E-D-B*2-J*2);I.style.left=(G[0]>M)?M+"px":G[0]+"px";I.style.top=parseInt(G[1]+K+3)+"px";I.style.zIndex=99999;I.style.visibility="visible"}}function GV_Tracklist_Tooltip_Hide(B){var C,A;if(document.getElementById("gv_legend_tooltip")){A=document.getElementById("gv_legend_tooltip")}else{if(document.getElementById("gv_tracklist_tooltip")){A=document.getElementById("gv_tracklist_tooltip")}else{return false}}if(document.getElementById(B)){C=document.getElementById(B)}if(A){A.innerHTML="";A.style.visibility="hidden";A.style.display="none";A.style.top="-2000px"}}function GV_Tracklist_Tooltip_Hide_Delayed(A){var B=document.getElementById(A);if(B){B.innerHTML="";B.style.visibility="hidden";B.style.display="none";B.style.top="-2000px"}}function findPos(C){var B=0;var A=0;if(C.offsetParent){B=C.offsetLeft;A=C.offsetTop;while(C=C.offsetParent){B+=C.offsetLeft;A+=C.offsetTop}}return[B,A]}function GPSV_Waypoint(A,I,C,H,D,G,B,E,F){GV_Marker(gmap,I,A,C,H,D,G,B,E,F)}function GPSV_Toggle_Track_And_Label(B,A){GV_Toggle_Track_And_Label(B,A)}function GPSV_Toggle_Opacity(A){GV_Toggle_Overlays(A)}function GPSV_Toggle_Label_Opacity(A,B){GV_Toggle_Label_Opacity(A,B)}function GPSV_MapTypeControl(){}if(google_api_version>=2){GPSV_MapTypeControl.prototype=GV_MapTypeControl.prototype}function GV_Legend_Tooltip_Show(A,B){GV_Tracklist_Tooltip_Show(A,B)}function GV_Legend_Tooltip_Hide(A){GV_Tracklist_Tooltip_Hide(A)}function GV_Legend_Tooltip_Hide_Delayed(A){GV_Tracklist_Tooltip_Hide_Delayed(A)}function GV_Load_Markers_From_XML(opts){var map_name=opts.map||"gmap";var map=eval(map_name);var array_name=opts.array||"wpts";var marker_array=eval(array_name);var filename=opts.xml||"markers.xml";if(opts.prevent_caching){var query_punctuation=(filename.indexOf("?")>-1)?"&":"?";var timestamp=new Date();filename=filename+query_punctuation+"gv_nocache="+timestamp.valueOf()}GDownloadUrl(filename,function(data,responseCode){var xml=GXml.parse(data);var markers=xml.documentElement.getElementsByTagName(opts.tag||"marker");for(var i=0;i<markers.length;i++){var m=new Array;m.lat=m.lon=null;if(markers[i].getAttribute("latitude")){m.lat=parseFloat(markers[i].getAttribute("latitude"))}else{if(markers[i].getAttribute("lat")){m.lat=parseFloat(markers[i].getAttribute("lat"))}}var lon=null;if(markers[i].getAttribute("longitude")){m.lon=parseFloat(markers[i].getAttribute("longitude"))}else{if(markers[i].getAttribute("lon")){m.lon=parseFloat(markers[i].getAttribute("lon"))}else{if(markers[i].getAttribute("lng")){m.lon=parseFloat(markers[i].getAttribute("lng"))}else{if(markers[i].getAttribute("long")){m.lon=parseFloat(markers[i].getAttribute("long"))}}}}if(m.lat&&m.lon){m.name=m.desc=m.color=m.icon="";if(markers[i].getAttribute("name")){m.name=markers[i].getAttribute("name")}if(markers[i].getAttribute("desc")){m.desc=markers[i].getAttribute("desc")}if(markers[i].getAttribute("color")){m.color=markers[i].getAttribute("color")}if(markers[i].getAttribute("icon")){m.icon=markers[i].getAttribute("icon")}else{if(markers[i].getAttribute("sym")){m.icon=markers[i].getAttribute("sym")}else{if(markers[i].getAttribute("symbol")){m.icon=markers[i].getAttribute("symbol")}}}if(markers[i].getAttribute("icon_size")&&markers[i].getAttribute("icon_size").match(/([0-9]+)[^0-9]+([0-9]+)/)){var parts=markers[i].getAttribute("icon_size").match(/([0-9]+)[^0-9]+([0-9]+)/);m.icon_size=[parts[1],parts[2]]}else{if(markers[i].getAttribute("width")&&markers[i].getAttribute("height")){m.icon_size=[markers[i].getAttribute("width"),markers[i].getAttribute("height")]}}if(markers[i].getAttribute("scale")){m.scale=markers[i].getAttribute("scale")}marker_array.push(GV_Marker(map,{lat:m.lat,lon:m.lon,name:m.name,desc:m.desc,color:m.color,icon:m.icon,scale:m.scale,icon_size:m.icon_size}))}}window.setTimeout("GV_Process_Waypoints("+map_name+","+array_name+")",200)})}function GV_Get_Dynamic_Markers(opts){var dmo=(opts.dynamic_marker_options)?opts.dynamic_marker_options:opts;if(!dmo.db||!dmo.url){return }var program_on_server=dmo.url;var map_name=opts.map||"gmap";var map=eval(map_name);if(!map){return false}var array_name=opts.marker_array||"gv_dynamic_markers";if(self.gv_options&&gv_options.marker_filter_options){gv_options.marker_filter_options["filter"]=false}gv_filter_waypoints=false;if(!eval("self."+array_name)){eval(array_name+" = [];")}var marker_array=eval(array_name);var SW=map.getBounds().getSouthWest();var NE=map.getBounds().getNorthEast();var lat_center=map.getCenter().lat().toFixed(7);var lon_center=map.getCenter().lng().toFixed(7);var moved_enough=true;if(self.gv_zoom_when_reloaded&&(map.getZoom()<gv_zoom_when_reloaded)){moved_enough=true}else{if(self.gv_center_when_reloaded&&self.gv_last_radius){if(map.getCenter().distanceFrom(gv_center_when_reloaded)<gv_last_radius*0.4){moved_enough=false}}}if(moved_enough){for(var i=0;i<marker_array.length;i++){map.removeOverlay(marker_array[i])}gv_marker_count=0;marker_array.length=0;if(gv_marker_list_exists){gv_marker_list_div.innerHTML="Loading markers...";gv_marker_list_html="";gv_marker_list_folders=[]}var fields=(dmo.fields)?dmo.fields:"name,description,latitude,longitude";var sort=(dmo.sort)?dmo.sort:"";var url=program_on_server+"?db="+dmo.db+"&fields="+escape(fields)+"&lat_center="+lat_center+"&lon_center="+lon_center+"&lat_min="+SW.lat().toFixed(7)+"&lat_max="+NE.lat().toFixed(7)+"&lon_min="+SW.lng().toFixed(7)+"&lon_max="+NE.lng().toFixed(7)+"&quota="+dmo.limit+"&sort="+sort;GDownloadUrl(url,function(data,responseCode){var xml=GXml.parse(data);var marker_tags=xml.documentElement.getElementsByTagName("marker");for(var i=0;i<marker_tags.length;i++){var this_color=(marker_tags[i].getAttribute("color"))?marker_tags[i].getAttribute("color"):"";var this_icon=(marker_tags[i].getAttribute("icon"))?marker_tags[i].getAttribute("icon"):"";var this_label=(marker_tags[i].getAttribute("label"))?marker_tags[i].getAttribute("label"):marker_tags[i].getAttribute("name");var this_shortdesc=(marker_tags[i].getAttribute("shortdesc"))?marker_tags[i].getAttribute("shortdesc"):"";var this_folder=(marker_tags[i].getAttribute("folder"))?marker_tags[i].getAttribute("folder"):"";this_label=(dmo.labels)?this_label:"";var m=GV_Marker(map,{lat:marker_tags[i].getAttribute("lat"),lon:marker_tags[i].getAttribute("lon"),name:marker_tags[i].getAttribute("name"),desc:marker_tags[i].getAttribute("desc"),shortdesc:this_shortdesc,color:this_color,icon:this_icon,label:this_label,folder:this_folder});marker_array.push(m)}gv_last_radius=0.7*map.getCenter().distanceFrom(map.getBounds().getSouthWest());if(dmo.circle){var trackpoints=xml.documentElement.getElementsByTagName("trkpt");if(trackpoints.length){var tracks=xml.documentElement.getElementsByTagName("trk");gv_last_radius=tracks[0].getAttribute("radius");var pts=[];for(var i=0;i<trackpoints.length;i++){pts.push(new GLatLng(trackpoints[i].getAttribute("lat"),trackpoints[i].getAttribute("lon")))}var circle_color=(gv_marker_color)?gv_marker_color.toLowerCase():"white";marker_array.push(new GPolyline(pts,GV_Color_Name2Hex(circle_color),2,0.2));map.addOverlay(marker_array[marker_array.length-1])}}if(gv_marker_list_exists){GV_Marker_List()}});gv_center_when_reloaded=map.getCenter();gv_zoom_when_reloaded=map.getZoom()}}function GV_Load_Markers_From_File(){if(!self.gv_options||!gv_options.dynamic_data||!gv_options.dynamic_data[gv_dynamic_file_index]){return false}var D=gv_options.dynamic_data[gv_dynamic_file_index];var C=false;var B=false;if(D.google_spreadsheet&&!D.url){D.url=D.google_spreadsheet;C=true}if(D.url.match(/^http:\/\/maps\.google\./)){var A=(D.url.indexOf("?")>-1)?"&":"?";D.url=D.url+A+"output=kml";B=true}else{if(C||(D.url&&D.url.indexOf("google.com")>-1)){D.root_tag=(D.root_tag)?D.root_tag:"feed";D.marker_tag=(D.marker_tag)?D.marker_tag:"entry";D.tag_prefix=(D.tag_prefix)?D.tag_prefix:"gsx$";D.content_tag=(D.content_tag)?D.content_tag:"$t";D.tagnames_stripped=(D.tagnames_stripped==false)?false:true;D.prevent_caching=false;C=true}else{if(D.url.indexOf(".gpx")>-1){D.root_tag="gpx";D.marker_tag="wpt";D.track_tag="trk";D.track_segment_tag="trkseg";D.track_point_tag="trkpt";D.tag_prefix="";D.content_tag="";D.tagnames_stripped=false}}}gv_options.dynamic_data[gv_dynamic_file_index]=D;if(gv_marker_list_exists){gv_marker_list_div.innerHTML="Loading markers...";if(!self.gv_marker_list_html){gv_marker_list_html=""}if(!self.gv_marker_list_folders){gv_marker_list_folders=[]}}if(!C&&(B||D.url.match(/\.xml$/i))){GV_Load_Markers_From_XML_File(D.url)}else{if(C||D.url.match(/json|\.js\b|-js\b/i)){GV_Load_Markers_From_JSON(D.url)}else{GV_Load_Markers_From_XML_File(D.url)}}}function GV_Reload_Markers_From_File(index){if(!self.gv_options||!gv_options.dynamic_data||!gv_options.dynamic_data[index]["url"]){return false}var map_name=(self.gv_options&&gv_options.map)?gv_options.map:"gmap";var map=eval("self."+map_name);var marker_array_name=(self.gv_options&&gv_options.marker_array)?gv_options.marker_array:"wpts";var marker_array=eval("self."+marker_array_name);if(self.gv_options&&gv_options.marker_filter_options){gv_options.marker_filter_options["filter"]=false}gv_filter_waypoints=false;var current_bounds=map.getBounds();var current_center=map.getCenter();var current_zoom=map.getZoom();var lat_center=current_center.lat().toFixed(7);var lon_center=current_center.lng().toFixed(7);var SW=current_bounds.getSouthWest();var NE=current_bounds.getNorthEast();var moved_enough=true;if(self.gv_dynamic_data_last_zoom&&(current_zoom!=gv_dynamic_data_last_zoom)){moved_enough=true}else{if(self.gv_dynamic_data_last_center&&gv_options.dynamic_data[index]["movement_threshold"]){var width_in_meters=current_center.distanceFrom(new GLatLng(current_center.lat(),current_bounds.getNorthEast().lng()))*2;var moved_in_meters=current_center.distanceFrom(gv_dynamic_data_last_center);var fraction_moved=moved_in_meters/width_in_meters;var pixels_moved=map.getContainer().clientWidth*fraction_moved;if(pixels_moved<parseFloat(gv_options.dynamic_data[index]["movement_threshold"])){moved_enough=false}}}gv_dynamic_data_last_center=map.getCenter();gv_dynamic_data_last_zoom=map.getZoom();if(moved_enough){for(var i=0;i<marker_array.length;i++){map.removeOverlay(marker_array[i])}gv_marker_count=0;marker_array.length=0;if(gv_marker_list_exists){gv_marker_list_div.innerHTML="Loading markers...";gv_marker_list_html="";gv_marker_list_folders=[]}GV_Load_Markers_From_File()}}function GV_Load_Markers_From_JSON(C){var E="";var F="default";var B;if(C.indexOf("http")<1&&C.match(/(spreadsheets|docs)\.google\.\w+\//i)){if(C.indexOf("key=")>-1){E=C.replace(/^.*key=([A-Za-z0-9\._-]+).*/,"$1")}else{if(C.indexOf("/feeds/")>-1){E=C.replace(/^.*\/feeds\/\w+\/([A-Za-z0-9\._-]+).*/,"$1");F=C.replace(/^.*\/feeds\/\w+\/[A-Za-z0-9\._-]+\/(\w+).*/,"$1")}}}else{if(C.match(/^http|^\/|\.js\b|json\b/)){var A=(C.indexOf("?")>-1)?"&":"?";B=C+A+"callback=GV_Load_Markers_From_Data_Object"}else{E=C}}if(E){B="http://spreadsheets.google.com/feeds/list/"+E+"/"+F+"/public/values?alt=json-in-script&callback=GV_Load_Markers_From_Data_Object"}if(!B){return false}var D=(gv_options.dynamic_data[gv_dynamic_file_index]["prevent_caching"]==false)?true:false;gv_json_script=new JSONscriptRequest(B,{clean:D});gv_json_script.buildScriptTag();gv_json_script.addScriptTag();window.setTimeout('GV_Check_For_Unsuccessful_JSON("'+E+'")',1000)}function GV_Check_For_Unsuccessful_JSON(B){gv_json_script2=new JSONscriptRequest("");var A="if(gv_options['dynamic_data']&&gv_options['dynamic_data'][gv_dynamic_file_index]&&!gv_options['dynamic_data'][gv_dynamic_file_index]['processed']){";A+="gv_options['dynamic_data'][gv_dynamic_file_index]['processed']=true;";A+="if(1==2 && gv_options['dynamic_data'][gv_dynamic_file_index]['url'].match(/spreadsheets.google./)){";A+="alert('This map was supposed to load data from a Google Docs spreadsheet (key: "+B+"), but the operation may have been unsuccessful. Please verify that the spreadsheet is \\'published.\\'');";A+="}";A+="GV_Finish_Map(gv_options);";A+="}";gv_json_script2.buildScriptTag_custom(A);gv_json_script2.addScriptTag()}function GV_Load_Markers_From_XML_File(url){var local_file=false;if(url.indexOf("http")==0){var first_slash_position=document.location.toString().substring(9).indexOf("/")+9;var server=document.location.toString().substring(0,first_slash_position);if(url.indexOf(server)==0&&!url.match(/csv$/i)){local_file=true}else{local_file=false;var proxy_program;if(url.match(/(csv$|NavApiCSV)/i)){proxy_program="http://maps.gpsvisualizer.com/google_maps/csv-json.php?callback=GV_Load_Markers_From_Data_Object&url="}else{proxy_program="http://maps.gpsvisualizer.com/google_maps/xml-json.cgi?callback=GV_Load_Markers_From_Data_Object&url="}GV_Load_Markers_From_JSON(proxy_program+uri_escape(url));return }}else{local_file=true}if(local_file){if(gv_options.dynamic_data&&gv_options.dynamic_data[gv_dynamic_file_index]["reload_on_move"]){var map_name=(self.gv_options&&gv_options.map)?gv_options.map:"gmap";var map=eval("self."+map_name);var SW=map.getBounds().getSouthWest();var NE=map.getBounds().getNorthEast();var query_punctuation=(url.indexOf("?")>-1)?"&":"?";var limit=(parseFloat(gv_options.dynamic_data[gv_dynamic_file_index]["limit"])>0)?parseFloat(gv_options.dynamic_data[gv_dynamic_file_index]["limit"]):"";var sort=(gv_options.dynamic_data[gv_dynamic_file_index]["sort"])?gv_options.dynamic_data[gv_dynamic_file_index]["sort"]:"";var url=url+query_punctuation+"&lat_min="+SW.lat().toFixed(7)+"&lat_max="+NE.lat().toFixed(7)+"&lon_min="+SW.lng().toFixed(7)+"&lon_max="+NE.lng().toFixed(7)+"&limit="+limit+"&sort="+sort}var prevent_caching=(gv_options.dynamic_data&&gv_options.dynamic_data[gv_dynamic_file_index]["prevent_caching"]==false)?false:true;if(prevent_caching){var query_punctuation=(url.indexOf("?")>-1)?"&":"?";var timestamp=new Date();url=url+query_punctuation+"gv_nocache="+timestamp.valueOf()}getURL(url,null,GV_Load_Markers_From_XML_File_callback);return }}function GV_Load_Markers_From_XML_File_callback(text){var xml_data=parseXML(text);var json_data=xml2json(xml_data,"","");eval("var data_from_xml_file = "+json_data);GV_Load_Markers_From_Data_Object(data_from_xml_file)}function GV_Load_Markers_From_Data_Object(data){if(!gv_options.dynamic_data[gv_dynamic_file_index]){return }var opts=gv_options.dynamic_data[gv_dynamic_file_index];var root_tag,track_tag,track_segment_tag,track_point_tag,marker_tag,tag_prefix,prefix_length,content_tag,tagnames_stripped;root_tag=(opts.root_tag)?opts.root_tag:"";track_tag=(opts.track_tag)?opts.track_tag:"";track_segment_tag=(opts.track_segment_tag)?opts.track_segment_tag:"";track_point_tag=(opts.track_point_tag)?opts.track_point_tag:"";marker_tag=(opts.marker_tag)?opts.marker_tag:"";tag_prefix=(opts.tag_prefix)?opts.tag_prefix:"";prefix_length=tag_prefix.length;content_tag=(opts.content_tag)?opts.content_tag:"";tagnames_stripped=(opts.tagnames_stripped)?true:false;if(self.gv_json_script){gv_json_script.removeScriptTag()}map_name=(self.gv_options&&gv_options.map)?gv_options.map:"gmap";var map=eval("self."+map_name);if(!map){return false}marker_array_name=(self.gv_options&&gv_options.marker_array)?gv_options.marker_array:"wpts";var marker_array=eval("self."+marker_array_name);if(!marker_array){wpts=[];marker_array=wpts;gv_options.marker_array="wpts"}track_array_name=(self.gv_options&&gv_options.track_array)?gv_options.track_array:"trk";var track_array=eval("self."+track_array_name);track_info_array_name=(self.gv_options&&gv_options.track_info_array)?gv_options.track_info_array:"trk_info";var track_info_array=eval("self."+track_array_name);if(!track_array){trk=[];track_array=trk;gv_options.track_array="trk"}if(!track_info_array){trk_info=[];track_info_array=trk_info;gv_options.track_info_array="trk_info"}if(!root_tag){for(var rt in data){if(!root_tag&&data[rt]){root_tag=rt}}}if(root_tag&&!marker_tag){for(var mt in data[root_tag]){if(!marker_tag&&data[root_tag][mt]){marker_tag=mt}}}if(root_tag=="kml"){if(data[root_tag]["Document"]||data[root_tag]["Folder"]||data[root_tag]["Placemark"]){if(!data[root_tag]["Document"]){data[root_tag]["Document"]=[data[root_tag]]}else{if(!data[root_tag]["Document"].length){data[root_tag]["Document"]=[data[root_tag]["Document"]]}}var marker_count=0;var marker_styles=[];var track_styles=[];for(i=0;i<data[root_tag]["Document"].length;i++){var doc=data[root_tag]["Document"][i];if(doc.Style){if(!doc.Style.length){doc.Style=[doc.Style]}for(j=0;j<doc.Style.length;j++){if(doc.Style[j]["id"]&&doc.Style[j]["IconStyle"]){var ist=doc.Style[j]["IconStyle"];var this_style=[];this_style.icon=(ist.Icon&&ist.Icon["href"])?ist.Icon["href"]:null;this_style.scale=(ist.scale)?parseFloat(ist.scale):null;if(ist.color&&ist.color.length==8){this_style.color="#"+ist.color.replace(/\w\w(\w\w)(\w\w)(\w\w)/,"$3$2$1");this_style.opacity=parseInt(ist.color.replace(/(\w\w)\w\w\w\w\w\w/,"$1"),16)/255}marker_styles[doc.Style[j]["id"]]=this_style}if(doc.Style[j]["id"]&&doc.Style[j]["LineStyle"]){var lst=doc.Style[j]["LineStyle"];var this_style=[];if(lst.color&&lst.color.length==8){this_style.color="#"+lst.color.replace(/\w\w(\w\w)(\w\w)(\w\w)/,"$3$2$1");this_style.opacity=parseInt(lst.color.replace(/(\w\w)\w\w\w\w\w\w/,"$1"),16)/255}if(lst.width){this_style.width=parseFloat(lst.width)}track_styles[doc.Style[j]["id"]]=this_style}}}if(doc.StyleMap){if(!doc.StyleMap.length){doc.StyleMap=[doc.StyleMap]}for(j=0;j<doc.StyleMap.length;j++){var sm=doc.StyleMap[j];if(sm.Pair){if(!sm.Pair.length){sm.Pair=[sm.Pair]}for(k=0;k<sm.Pair.length;k++){if(sm.Pair[k]["key"]&&sm.Pair[k]["key"]=="normal"&&sm.Pair[k]["styleUrl"]){var style_id=sm.Pair[k]["styleUrl"].replace(/^#/,"");if(marker_styles[style_id]){marker_styles[sm.id]=marker_styles[style_id]}if(track_styles[style_id]){track_styles[sm.id]=marker_styles[style_id]}}}}}}if(doc.Folder){if(!doc.Placemark){doc.Placemark=[]}else{if(doc.Placemark&&!doc.Placemark.length){doc.Placemark=[doc.Placemark]}}if(!doc.Folder.length){doc.Folder=[doc.Folder]}for(j=0;j<doc.Folder.length;j++){var folder=doc.Folder[j];var folder_name=(folder.name)?folder.name:"";if(folder.Placemark){if(!folder.Placemark.length){folder.Placemark=[folder.Placemark]}for(k=0;k<folder.Placemark.length;k++){var pm=folder.Placemark[k];pm.folder=folder_name;doc.Placemark.push(pm)}}if(folder.Folder){if(!folder.Folder.length){folder.Folder=[folder.Folder]}for(k=0;k<folder.Folder.length;k++){var subfolder=folder.Folder[k];var subfolder_name=(subfolder.name)?subfolder.name:"";if(subfolder.Placemark){if(!subfolder.Placemark.length){subfolder.Placemark=[subfolder.Placemark]}for(l=0;l<subfolder.Placemark.length;l++){var pm=subfolder.Placemark[l];pm.folder=subfolder_name;doc.Placemark.push(pm)}}}}}}if(doc.Placemark){if(!doc.Placemark.length){doc.Placemark=[doc.Placemark]}for(j=0;j<doc.Placemark.length;j++){var pm=doc.Placemark[j];var marker_data=[];if(pm.Point&&pm.Point["coordinates"]){var parts=pm.Point["coordinates"].split(",");marker_data.lon=parseFloat(parts[0]);marker_data.lat=parseFloat(parts[1]);if((marker_data.lat==0&&marker_data.lon==0)||marker_data.lat=="NaN"||marker_data.lon=="NaN"||Math.abs(marker_data.lat)>90||Math.abs(marker_data.lon)>180||marker_data.lat==undefined||marker_data.lon==undefined){}else{marker_data.name=(pm.name)?(pm.name):"";marker_data.desc=(pm.description)?(pm.description):"";marker_data.folder=(pm.folder)?(pm.folder):"";if(pm.styleUrl){var style_id=pm.styleUrl.replace(/^#/,"");if(marker_styles[style_id]){for(var attr in marker_styles[style_id]){marker_data[attr]=marker_styles[style_id][attr]}}}if(pm.Style&&pm.Style["IconStyle"]){var ist=pm.Style["IconStyle"];if(ist.Icon&&ist.Icon["href"]){marker_data.icon=ist.Icon["href"]}if(ist.scale){marker_data.scale=parseFloat(ist.scale)}if(ist.color&&ist.color.length==8){marker_data.color="#"+ist.color.replace(/\w\w(\w\w)(\w\w)(\w\w)/,"$3$2$1");marker_data.opacity=parseInt(ist.color.replace(/(\w\w)\w\w\w\w\w\w/,"$1"),16)/255}}else{if(pm.StyleMap&&pm.StyleMap["Pair"]){if(!pm.StyleMap["Pair"].length){pm.StyleMap["Pair"]=[pm.StyleMap["Pair"]]}for(k=0;k<pm.StyleMap["Pair"].length;k++){if(pm.StyleMap["Pair"][k]["key"]&&pm.StyleMap["Pair"][k]["key"]=="normal"&&pm.StyleMap["Pair"][k]["Style"]){var st=pm.StyleMap["Pair"][k]["Style"];if(st.IconStyle){var ist=st.IconStyle;if(ist.Icon&&ist.Icon["href"]){marker_data.icon=ist.Icon["href"]}if(ist.scale){marker_data.scale=parseFloat(ist.scale)}if(ist.color&&ist.color.length==8){marker_data.color="#"+ist.color.replace(/\w\w(\w\w)(\w\w)(\w\w)/,"$3$2$1");marker_data.opacity=parseInt(ist.color.replace(/(\w\w)\w\w\w\w\w\w/,"$1"),16)/255}}if(st.BalloonStyle){var bst=st.BalloonStyle;var balloon_text=bst.text.replace(/\$\[(\w+)\]/g,function(complete_match,field_name){return(pm[field_name])?pm[field_name]:""});balloon_text=balloon_text.replace(/\s*(<br\/?>\s*|&#160;\s*)*\s*$/g,"");if(balloon_text){marker_data.desc=balloon_text}}}}}}if(marker_data.icon){if(marker_data.icon.match(/maps\.google\.com.*\/mapfiles\/.*icons\/[\w\.\-]+.png/)){marker_data.icon_anchor=[15,31]}}marker_array.push(GV_Marker(map,marker_data));marker_count++}}else{if(pm.MultiGeometry||pm.GeometryCollection||pm.LineString){var tn=(!track_array.length)?1:track_array.length+1;track_array[tn]=[];track_info_array[tn]=[];track_info_array[tn]["name"]=(pm.name)?pm.name:"[track]";track_info_array[tn]["desc"]=(pm.description)?pm.description:"";track_info_array[tn]["color"]=(opts.track_options&&opts.track_options["color"])?opts.track_options["color"]:"#E600E6";track_info_array[tn]["width"]=(opts.track_options&&opts.track_options["width"])?parseFloat(opts.track_options["width"]):4;track_info_array[tn]["opacity"]=(opts.track_options&&opts.track_options["opacity"])?parseFloat(opts.track_options["opacity"]):0.8;if(pm.styleUrl){var style_id=pm.styleUrl.replace(/^#/,"");if(track_styles[style_id]){for(var attr in track_styles[style_id]){track_info_array[tn][attr]=track_styles[style_id][attr]}}}if(pm.Style&&pm.Style["LineStyle"]){var lst=pm.Style["LineStyle"];if(lst.color&&lst.color.length==8){track_info_array[tn]["color"]="#"+lst.color.replace(/\w\w(\w\w)(\w\w)(\w\w)/,"$3$2$1");track_info_array[tn]["opacity"]=parseInt(lst.color.replace(/(\w\w)\w\w\w\w\w\w/,"$1"),16)/255}if(lst.width){track_info_array[tn]["width"]=parseFloat(lst.width)}}if(!pm.LineString){pm.LineString=[]}else{if(pm.LineString&&!pm.LineString.length){pm.LineString=[pm.LineString]}}if(pm.MultiGeometry){if(pm.MultiGeometry["LineString"]&&!pm.MultiGeometry["LineString"].length){pm.MultiGeometry["LineString"]=[pm.MultiGeometry["LineString"]]}for(k=0;k<pm.MultiGeometry["LineString"].length;k++){pm.LineString.push(pm.MultiGeometry["LineString"][k])}}if(pm.GeometryCollection){if(pm.GeometryCollection["LineString"]&&!pm.GeometryCollection["LineString"].length){pm.GeometryCollection["LineString"]=[pm.GeometryCollection["LineString"]]}for(k=0;k<pm.GeometryCollection["LineString"].length;k++){pm.LineString.push(pm.GeometryCollection["LineString"][k])}}var segment_limit=200;for(k=0;k<pm.LineString.length;k++){if(pm.LineString[k]["coordinates"]){var pts=[];var coords=pm.LineString[k]["coordinates"].split(/\s+/);var last_point=null;for(l=0;l<coords.length;l++){var parts=coords[l].split(",");var lon=parseFloat(parts[0]);var lat=parseFloat(parts[1]);if(Math.abs(lat)<=90&&Math.abs(lon)<=180){pts.push(new GLatLng(lat,lon));if(pts.length%segment_limit==0){pts.unshift(last_point);track_array[tn].push(new GPolyline(pts,GV_Color_Name2Hex(track_info_array[tn]["color"]),track_info_array[tn]["width"],track_info_array[tn]["opacity"]));map.addOverlay(track_array[tn][track_array[tn].length-1]);last_point=new GLatLng(lat,lon);pts=[]}}}if(pts.length>0){if(last_point){pts.unshift(last_point)}track_array[tn].push(new GPolyline(pts,GV_Color_Name2Hex(track_info_array[tn]["color"]),track_info_array[tn]["width"],track_info_array[tn]["opacity"]));map.addOverlay(track_array[tn][track_array[tn].length-1])}}}GV_Add_Track_to_Tracklist({bullet:"- ",name:track_info_array[tn]["name"],desc:track_info_array[tn]["desc"],color:track_info_array[tn]["color"],map_name:map_name,id:track_array_name+"["+tn+"]"})}}}}}}}else{if(data&&data[root_tag]&&data[root_tag][marker_tag]){var alias=[];var numeric={lat:true,lon:true,scale:true,opacity:true,rotation:true};if(!data[root_tag][marker_tag].length){data[root_tag][marker_tag]=[data[root_tag][marker_tag]]}var row1=data[root_tag][marker_tag][0];var synthesize_pattern=new RegExp("{([^{]*)}","gi");for(var tag in row1){if(tag_prefix==""||tag.indexOf(tag_prefix)==0){var field=tag.substring(prefix_length);if(field.match(/^(name|nom|naam)\d?\b/i)){alias[field]="name"}else{if(field.match(/^(desc|descr|description)\d?\b/i)){alias[field]="desc"}else{if(field.match(/^(url|web.?page|link)\d?\b/i)){alias[field]="url"}else{if(field.match(/^(lati?|latt?itude)\b/i)){alias[field]="lat"}else{if(field.match(/^(long?|lng|long?t?itude)\b/i)){alias[field]="lon"}else{if(field.match(/^(colou?re?|couleur)\b/i)){alias[field]="color"}else{if(field.match(/^(icon|sym|symbol).?size\b/i)){alias[field]="icon_size"}else{if(field.match(/^(icon|sym|symbol).?anchor\b/i)){alias[field]="icon_anchor"}else{if(field.match(/^(icon|sym|symbol).?scale\b/i)){alias[field]="scale"}else{if(field.match(/^(icon|sym|symbol).?opacity\b/i)){alias[field]="scale"}else{if(field.match(/^(icon|sym|symbol)\b/i)){alias[field]="icon"}else{if(field.match(/^(thumbnail|thumb|tn).?(width|size)\b/i)){alias[field]="thumbnail_width"}else{if(field.match(/^(thumbnail|thumb|tn)\b/i)){alias[field]="thumbnail"}else{if(field.match(/^(opaque|opacity)\b/i)){alias[field]="opacity"}else{if(field.match(/^label.?offset\b/i)){alias[field]="label_offset"}else{if(field.match(/^zoom.?level\b/i)){alias[field]="zoom_level"}else{if(field.match(/^gv.?marker.?options\b/i)){alias[field]="gv_marker_options"}else{if(field.match(/^(gv.?)?track.?number\b/i)){alias[field]="gv_track_number"}}}}}}}}}}}}}}}}}}}}alias.description="desc";alias.sym="icon";alias.symbol="icon";alias.colour="color";alias.link="url";alias.latitude="lat";alias.longitude="lon";alias["long"]="lon";alias.lng="lon";if(opts.field_alias){for(var field in opts.field_alias){alias[opts.field_alias[field]]=field}}var marker_count=0;for(i=0;i<data[root_tag][marker_tag].length;i++){var row=data[root_tag][marker_tag][i];var marker_data=[];for(var tag in row){if(tag.indexOf(tag_prefix)==0){var field=tag.substring(prefix_length);var original_field=field;field=(alias[field])?alias[field].toLowerCase():field.toLowerCase();var value=(content_tag)?row[tag][content_tag]:row[tag];if(value!=null&&value.toString().match(/\w/)){if(field=="lat"||field=="lon"){marker_data[field]=parseFloat(ParseCoordinate(value))}else{if(field=="gv_marker_options"){try{eval("var extra_marker_list_options = {"+value+"};");for(var op in extra_marker_list_options){marker_data[op]=extra_marker_list_options[op]}}catch(error){}}else{if(field=="icon_size"||field=="icon_anchor"||field=="label_offset"||field=="thumbnail_size"){var numbers=FindOneOrTwoNumbersInString(value);if(numbers.length==1){marker_data[field]=[numbers[0],numbers[0]]}else{if(numbers.length==2){marker_data[field]=[numbers[0],numbers[1]]}}}else{if(numeric[field]||parseFloat(value).toString()==value.toString()){marker_data[field]=parseFloat(value)}else{if(value.toLowerCase()=="true"){marker_data[field]=true}else{if(value.toLowerCase()=="false"){marker_data[field]=false}else{if(value==undefined){marker_data[field]=""}else{marker_data[field]=value}}}}}}}}else{marker_data[field]=null}if(original_field!=field&&!marker_data[original_field]){marker_data[original_field]=marker_data[field]}}}if(opts.synthesize_fields){for(var f in opts.synthesize_fields){if(opts.synthesize_fields[f]){var template=opts.synthesize_fields[f];template=template.replace(synthesize_pattern,function(complete_match,field_name){field_name=(tagnames_stripped)?field_name.replace(/[^A-Za-z0-9\.]/gi,"").toLowerCase():field_name.toLowerCase();if(marker_data[field_name]||marker_data[field_name]=="0"||marker_data[field_name]===false){return(marker_data[field_name])}else{return("")}});marker_data[f]=template}}}if(opts.google_content_as_desc){marker_data.desc=(content_tag)?row.content[content_tag]:row.content}if((marker_data.lat==0&&marker_data.lon==0)||marker_data.lat=="NaN"||marker_data.lon=="NaN"||Math.abs(marker_data.lat)>90||Math.abs(marker_data.lon)>180||marker_data.lat==undefined||marker_data.lon==undefined){}else{marker_array.push(GV_Marker(map,marker_data));marker_count++;if(marker_data.gv_track_number){track_array[marker_data.gv_track_number].push(marker_array[marker_array.length-1])}}}}if(data&&data[root_tag]&&((track_tag&&data[root_tag][track_tag])||(track_point_tag&&data[root_tag][track_point_tag]))){if(track_tag&&data[root_tag][track_tag]&&!data[root_tag][track_tag].length){data[root_tag][track_tag]=[data[root_tag][track_tag]]}if(track_point_tag&&data[root_tag][track_point_tag]&&!data[root_tag][track_point_tag].length){data[root_tag][track_point_tag]=[data[root_tag][track_point_tag]]}var trk_default_name=(opts.track_options&&opts.track_options["name"])?opts.track_options["name"]:"[track]";var trk_default_desc=(opts.track_options&&opts.track_options["desc"])?opts.track_options["desc"]:"";var trk_default_color=(opts.track_options&&opts.track_options["color"])?opts.track_options["color"]:"#E600E6";var trk_default_width=(opts.track_options&&opts.track_options["width"])?parseFloat(opts.track_options["width"]):3;var trk_default_opacity=(opts.track_options&&opts.track_options["opacity"])?parseFloat(opts.track_options["opacity"]):0.8;if(!track_tag){track_tag="gv_tracks";data[root_tag]["gv_tracks"]=[data[root_tag]]}var tracks=(track_tag&&data[root_tag][track_tag])?data[root_tag][track_tag]:[data[root_tag]];for(i=0;i<tracks.length;i++){var this_trk=tracks[i];if((track_segment_tag&&this_trk[track_segment_tag])||(!track_segment_tag&&this_trk[track_point_tag])){var tn=(!track_array.length)?1:track_array.length+1;track_array[tn]=[];track_info_array[tn]=[];track_info_array[tn]["name"]=(this_trk.name)?this_trk.name:trk_default_name;track_info_array[tn]["desc"]=(this_trk.desc)?this_trk.desc:trk_default_desc;track_info_array[tn]["color"]=(this_trk.color)?this_trk.color:trk_default_color;track_info_array[tn]["width"]=(this_trk.width)?this_trk.width:trk_default_width;track_info_array[tn]["opacity"]=(this_trk.opacity)?this_trk.opacity:trk_default_opacity;if(track_segment_tag){if(!this_trk[track_segment_tag].length){this_trk[track_segment_tag]=[this_trk[track_segment_tag]]}for(j=0;j<this_trk[track_segment_tag].length;j++){var trkseg=this_trk[track_segment_tag][j];if(!trkseg[track_point_tag].length){trkseg[track_point_tag]=[trkseg[track_point_tag]]}var pts=[];for(k=0;k<trkseg[track_point_tag].length;k++){pts.push(new GLatLng(parseFloat(trkseg[track_point_tag][k]["lat"]),parseFloat(trkseg[track_point_tag][k]["lon"])))}track_array[tn].push(new GPolyline(pts,GV_Color_Name2Hex(track_info_array[tn]["color"]),track_info_array[tn]["width"],track_info_array[tn]["opacity"]));map.addOverlay(track_array[tn][track_array[tn].length-1])}}else{if(!this_trk[track_point_tag].length){this_trk[track_point_tag]=[this_trk[track_point_tag]]}var pts=[];var lat_alias;var lon_alias;for(k=0;k<this_trk[track_point_tag].length;k++){if(k==0){for(var field in this_trk[track_point_tag][k]){if(field.match(/^(lati?|latt?itude)\b/i)){lat_alias=field}else{if(field.match(/^(long?|lng|long?t?itude)\b/i)){lon_alias=field}}}}pts.push(new GLatLng(parseFloat(this_trk[track_point_tag][k][lat_alias]),parseFloat(this_trk[track_point_tag][k][lon_alias])))}track_array[tn].push(new GPolyline(pts,GV_Color_Name2Hex(track_info_array[tn]["color"]),track_info_array[tn]["width"],track_info_array[tn]["opacity"]));map.addOverlay(track_array[tn][track_array[tn].length-1])}GV_Add_Track_to_Tracklist({bullet:"- ",name:track_info_array[tn]["name"],desc:track_info_array[tn]["desc"],color:track_info_array[tn]["color"],map_name:map_name,id:track_array_name+"["+tn+"]"})}}}}gv_options.zoom=(opts.autozoom!=false)?"auto":gv_options.zoom;gv_options.autozoom_adjustment=(opts.zoom_adjustment)?opts.zoom_adjustment:0;if(marker_count==1&&document.getElementById("gv_crosshair")){document.getElementById("gv_crosshair").style.display="none"}if(gv_options.dynamic_data){gv_options.dynamic_data[gv_dynamic_file_index]["processed"]=true}GV_Finish_Map(gv_options)}function FindGoogleAPIVersion(){var C=2;var B=document.getElementsByTagName("script");for(var D=0;D<B.length;D++){var E=/\/mapfiles\/([0-9]+)\/maps([0-9])?\.api\//;var A=E.exec(B[D].src);if(A!=null&&A[1]&&A[2]){C=parseFloat(A[2]+"."+A[1]);break}}return C}function ParseCoordinate(B){B=B.toString();B=B.replace(/([0-9][0-9][0-9]?)([0-9][0-9])\.([0-9]+)/,"$1 $2");B=B.replace(/[^NESW0-9\.\- ]/gi," ");var A=0;if(B.match(/(^\s*-|[WS])/i)){A=1}B=B.replace(/[NESW\-]/gi," ");if(!B.match(/[0-9]/i)){return""}parts=B.match(/([0-9\.\-]+)[^0-9\.]*([0-9\.]+)?[^0-9\.]*([0-9\.]+)?/);if(!parts||parts[1]==null){return""}else{n=parseFloat(parts[1]);if(parts[2]){n=n+parseFloat(parts[2])/60}if(parts[3]){n=n+parseFloat(parts[3])/3600}if(A&&n>=0){n=0-n}n=Math.round(10000000*n)/10000000;if(n==Math.floor(n)){n=n+".0"}n=n+"";n=n.replace(/,/g,".");return n}}function FindOneOrTwoNumbersInString(E){var D=new RegExp("(-?[0-9]+.?[0-9]*)[^0-9-]+(-?[0-9]+.?[0-9]*)");var F=new RegExp("(-?[0-9]+.?[0-9]*)");var C=[];if(E&&E.match(D)){var B=D.exec(E);if(B){C=[parseFloat(B[1]),parseFloat(B[2])]}}else{if(E&&E.match(F)){var A=F.exec(E);if(A){C=[parseFloat(A[1])]}}}return C}function ELabel(H,C,B,F,I,G,A,D,E){this.point=H;this.html=C;this.classname=B||"";this.pixelOffset=F||new GSize(0,0);if(I){if(I<0){I=0}if(I>100){I=100}}this.percentOpacity=I;this.overlap=G||false;this.label_id=A;this.hide=D;this.centered=E}if(google_api_version>=2){ELabel.prototype=new GOverlay();ELabel.prototype.initialize=function(A){var C=document.createElement("div");C.style.position="absolute";C.style.visibility=(this.hide)?"hidden":"visible";C.innerHTML='<div id = "'+this.label_id+'" class="'+this.classname+'">'+this.html+"</div>";A.getPane(G_MAP_FLOAT_SHADOW_PANE).appendChild(C);this.map_=A;this.div_=C;if(this.percentOpacity){if(typeof (C.style.filter)=="string"){C.style.filter="alpha(opacity:"+this.percentOpacity+")"}if(typeof (C.style.KHTMLOpacity)=="string"){C.style.KHTMLOpacity=this.percentOpacity/100}if(typeof (C.style.MozOpacity)=="string"){C.style.MozOpacity=this.percentOpacity/100}if(typeof (C.style.opacity)=="string"){C.style.opacity=this.percentOpacity/100}}if(this.overlap){var B=GOverlay.getZIndex(this.point.lat());this.div_.style.zIndex=B}};ELabel.prototype.remove=function(){this.div_.parentNode.removeChild(this.div_)};ELabel.prototype.copy=function(){return new ELabel(this.point,this.html,this.classname,this.pixelOffset,this.percentOpacity,this.overlap)};ELabel.prototype.redraw=function(E){var F=this.map_.fromLatLngToDivPixel(this.point);var C=parseInt(this.div_.clientHeight);C=15;var B=(this.centered)?1-parseInt(this.div_.clientWidth/2):this.pixelOffset.width;var A=this.pixelOffset.height-C;var D=parseInt(this.div_.clientWidth/2);this.div_.style.left=(F.x+B)+"px";this.div_.style.top=(F.y+A)+"px"};ELabel.prototype.show=function(){this.div_.style.display=""};ELabel.prototype.hide=function(){this.div_.style.display="none"};ELabel.prototype.setContents=function(A){this.html=A;this.div_.innerHTML='<div id = "'+this.label_id+'" class="'+this.classname+'">'+this.html+"</div>";this.redraw(true)};ELabel.prototype.setPoint=function(A){this.point=A;if(this.overlap){var B=GOverlay.getZIndex(this.point.lat());this.div_.style.zIndex=B}this.redraw(true)};ELabel.prototype.setOpacity=function(A){if(A){if(A<0){A=0}if(A>100){A=100}}this.percentOpacity=A;if(this.percentOpacity){if(typeof (this.div_.style.filter)=="string"){this.div_.style.filter="alpha(opacity:"+this.percentOpacity+")"}if(typeof (this.div_.style.KHTMLOpacity)=="string"){this.div_.style.KHTMLOpacity=this.percentOpacity/100}if(typeof (this.div_.style.MozOpacity)=="string"){this.div_.style.MozOpacity=this.percentOpacity/100}if(typeof (this.div_.style.opacity)=="string"){this.div_.style.opacity=this.percentOpacity/100}}}}var Drag={obj:null,init:function(D,H,F,B,E,A,I,G,J,C){if(!D){return false}D.onmousedown=Drag.start;D.hmode=I?false:true;D.vmode=G?false:true;D.root=H&&H!=null?H:D;if(D.hmode&&isNaN(parseInt(D.root.style.left))){D.root.style.left="0px"}if(D.vmode&&isNaN(parseInt(D.root.style.top))){D.root.style.top="0px"}if(!D.hmode&&isNaN(parseInt(D.root.style.right))){D.root.style.right="0px"}if(!D.vmode&&isNaN(parseInt(D.root.style.bottom))){D.root.style.bottom="0px"}D.minX=typeof F!="undefined"?F:null;D.minY=typeof E!="undefined"?E:null;D.maxX=typeof B!="undefined"?B:null;D.maxY=typeof A!="undefined"?A:null;D.xMapper=J?J:null;D.yMapper=C?C:null;D.root.onDragStart=new Function();D.root.onDragEnd=new Function();D.root.onDrag=new Function()},start:function(B){var C=Drag.obj=this;B=Drag.fixE(B);var D=parseInt(C.vmode?C.root.style.top:C.root.style.bottom);var A=parseInt(C.hmode?C.root.style.left:C.root.style.right);C.root.onDragStart(A,D);C.lastMouseX=B.clientX;C.lastMouseY=B.clientY;if(C.hmode){if(C.minX!=null){C.minMouseX=B.clientX-A+C.minX}if(C.maxX!=null){C.maxMouseX=C.minMouseX+C.maxX-C.minX}}else{if(C.minX!=null){C.maxMouseX=-C.minX+B.clientX+A}if(C.maxX!=null){C.minMouseX=-C.maxX+B.clientX+A}}if(C.vmode){if(C.minY!=null){C.minMouseY=B.clientY-D+C.minY}if(C.maxY!=null){C.maxMouseY=C.minMouseY+C.maxY-C.minY}}else{if(C.minY!=null){C.maxMouseY=-C.minY+B.clientY+D}if(C.maxY!=null){C.minMouseY=-C.maxY+B.clientY+D}}gv_onmousemove_before_dragging=document.onmousemove;gv_onmouseup_before_dragging=document.onmouseup;document.onmousemove=Drag.drag;document.onmouseup=Drag.end;return false},drag:function(E){E=Drag.fixE(E);var F=Drag.obj;var C=E.clientY;var D=E.clientX;var H=parseInt(F.vmode?F.root.style.top:F.root.style.bottom);var B=parseInt(F.hmode?F.root.style.left:F.root.style.right);var A,G;if(F.minX!=null){D=F.hmode?Math.max(D,F.minMouseX):Math.min(D,F.maxMouseX)}if(F.maxX!=null){D=F.hmode?Math.min(D,F.maxMouseX):Math.max(D,F.minMouseX)}if(F.minY!=null){C=F.vmode?Math.max(C,F.minMouseY):Math.min(C,F.maxMouseY)}if(F.maxY!=null){C=F.vmode?Math.min(C,F.maxMouseY):Math.max(C,F.minMouseY)}A=B+((D-F.lastMouseX)*(F.hmode?1:-1));G=H+((C-F.lastMouseY)*(F.vmode?1:-1));if(F.xMapper){A=F.xMapper(H)}else{if(F.yMapper){G=F.yMapper(B)}}Drag.obj.root.style[F.hmode?"left":"right"]=A+"px";Drag.obj.root.style[F.vmode?"top":"bottom"]=G+"px";Drag.obj.lastMouseX=D;Drag.obj.lastMouseY=C;Drag.obj.root.onDrag(A,G);return false},end:function(){document.onmousemove=(self.gv_onmousemove_before_dragging)?gv_onmousemove_before_dragging:null;document.onmouseup=(self.gv_onmouseup_before_dragging)?gv_onmouseup_before_dragging:null;Drag.obj.root.onDragEnd(parseInt(Drag.obj.root.style[Drag.obj.hmode?"left":"right"]),parseInt(Drag.obj.root.style[Drag.obj.vmode?"top":"bottom"]));Drag.obj=null},fixE:function(A){if(typeof A=="undefined"){A=window.event}if(typeof A.layerX=="undefined"){A.layerX=A.offsetX}if(typeof A.layerY=="undefined"){A.layerY=A.offsetY}return A}};function JSONscriptRequest(A,C){var B=(C&&C.clean)?true:false;this.fullUrl=A;this.noCacheIE=(B)?"":(A.indexOf("?")>-1)?"&noCacheIE="+(new Date()).getTime():"?noCacheIE="+(new Date()).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId="YJscriptId"+JSONscriptRequest.scriptCounter++}JSONscriptRequest.scriptCounter=1;JSONscriptRequest.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("src",this.fullUrl+this.noCacheIE);this.scriptObj.setAttribute("id",this.scriptId)};JSONscriptRequest.prototype.buildScriptTag_custom=function(A){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("id",this.scriptId);this.scriptObj.text=A};JSONscriptRequest.prototype.removeScriptTag=function(){if(this.scriptObj){if(this.scriptObj.parentNode!=this.headLoc){this.scriptObj.parentNode.removeChild(this.scriptObj)}else{this.headLoc.removeChild(this.scriptObj)}}};JSONscriptRequest.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)};function uri_escape(A){A=escape(A);A=A.replace(/\//g,"%2F");A=A.replace(/\?/g,"%3F");A=A.replace(/=/g,"%3D");A=A.replace(/&/g,"%26");A=A.replace(/@/g,"%40");A=A.replace(/\#/g,"%23");return(A)}function json2xml(D,C){var E=function(G,I,L){var H="";if(G instanceof Array){for(var J=0,M=G.length;J<M;J++){H+=L+E(G[J],I,L+"\t")+"\n"}}else{if(typeof (G)=="object"){var K=false;H+=L+"<"+I;for(var F in G){if(F.charAt(0)=="@"){H+=" "+F.substr(1)+'="'+G[F].toString()+'"'}else{K=true}}H+=K?">":"/>";if(K){for(var F in G){if(F=="#text"){H+=G[F]}else{if(F=="#cdata"){H+="<![CDATA["+G[F]+"]]>"}else{if(F.charAt(0)!="@"){H+=E(G[F],F,L+"\t")}}}}H+=(H.charAt(H.length-1)=="\n"?L:"")+"</"+I+">"}}else{H+=L+"<"+I+">"+G.toString()+"</"+I+">"}}return H},B="";for(var A in D){B+=E(D[A],A,"")}return C?B.replace(/\t/g,C):B.replace(/\t|\n/g,"")}function xml2json(A,C,E){var D={toObj:function(G){var L={};if(G.nodeType==1){if(G.attributes.length){for(var K=0;K<G.attributes.length;K++){L[E+G.attributes[K].nodeName]=(G.attributes[K].nodeValue||"").toString()}}if(G.firstChild){var F=0,J=0,I=false;for(var M=G.firstChild;M;M=M.nextSibling){if(M.nodeType==1){I=true}else{if(M.nodeType==3&&M.nodeValue.match(/[^ \f\n\r\t\v]/)){F++}else{if(M.nodeType==4){J++}}}}if(I){if(F<2&&J<2){D.removeWhite(G);for(var M=G.firstChild;M;M=M.nextSibling){if(M.nodeType==3){L=D.escape(M.nodeValue)}else{if(M.nodeType==4){L=D.escape(M.nodeValue)}else{if(L[M.nodeName]){if(L[M.nodeName] instanceof Array){L[M.nodeName][L[M.nodeName].length]=D.toObj(M)}else{L[M.nodeName]=[L[M.nodeName],D.toObj(M)]}}else{L[M.nodeName]=D.toObj(M)}}}}}else{if(!G.attributes.length){L=D.escape(D.innerXml(G))}else{L=D.escape(D.innerXml(G))}}}else{if(F){if(!G.attributes.length){L=D.escape(D.innerXml(G))}else{L=D.escape(D.innerXml(G))}}else{if(J){if(J>1){L=D.escape(D.innerXml(G))}else{for(var M=G.firstChild;M;M=M.nextSibling){L=D.escape(M.nodeValue)}}}}}}if(!G.attributes.length&&!G.firstChild){L=null}}else{if(G.nodeType==9){L=D.toObj(G.documentElement)}else{var H=("unhandled node type: "+G.nodeType)}}return L},toJson:function(L,H,K){var J=H?('"'+H+'"'):"";if(L instanceof Array){for(var I=0,M=L.length;I<M;I++){L[I]=D.toJson(L[I],"",K+"\t")}J+=(H?":[":"[")+(L.length>1?("\n"+K+"\t"+L.join(",\n"+K+"\t")+"\n"+K):L.join(""))+"]"}else{if(L==null){J+=(H&&":")+"null"}else{if(typeof (L)=="object"){var G=[];for(var F in L){G[G.length]=D.toJson(L[F],F,K+"\t")}J+=(H?":{":"{")+(G.length>1?("\n"+K+"\t"+G.join(",\n"+K+"\t")+"\n"+K):G.join(""))+"}"}else{if(typeof (L)=="string"){J+=(H&&":")+'"'+L.toString()+'"'}else{J+=(H&&":")+L.toString()}}}}return J},innerXml:function(H){var G="";if("innerHTML" in H){G=H.innerHTML}else{var F=function(M){var K="";if(M.nodeType==1){K+="<"+M.nodeName;for(var J=0;J<M.attributes.length;J++){K+=" "+M.attributes[J].nodeName+'="'+(M.attributes[J].nodeValue||"").toString()+'"'}if(M.firstChild){K+=">";for(var L=M.firstChild;L;L=L.nextSibling){K+=F(L)}K+="</"+M.nodeName+">"}else{K+="/>"}}else{if(M.nodeType==3){K+=M.nodeValue}else{if(M.nodeType==4){K+="<![CDATA["+M.nodeValue+"]]>"}}}return K};for(var I=H.firstChild;I;I=I.nextSibling){G+=F(I)}}return G},escape:function(F){return F.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(G){G.normalize();for(var H=G.firstChild;H;){if(H.nodeType==3){if(!H.nodeValue.match(/[^ \f\n\r\t\v]/)){var F=H.nextSibling;G.removeChild(H);H=F}else{H=H.nextSibling}}else{if(H.nodeType==1){D.removeWhite(H);H=H.nextSibling}else{H=H.nextSibling}}}return G}};if(A.nodeType==9){A=A.documentElement}var B=D.toJson(D.toObj(D.removeWhite(A)),A.nodeName,"\t");return"{\n"+C+(C?B.replace(/\t/g,C):B.replace(/\t|\n/g,""))+"\n}"}function parseXML(A){var D=null;if(window.DOMParser){try{D=(new DOMParser()).parseFromString(A,"text/xml")}catch(C){D=null}}else{if(window.ActiveXObject){try{D=new ActiveXObject("Microsoft.XMLDOM");D.async=false;if(!D.loadXML(A)){var B=(D.parseError.reason+D.parseError.srcText)}}catch(C){D=null}}else{return false}}return D}function getURL(B,D,A){if(typeof (XMLHttpRequest)=="undefined"){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(E){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(E){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(E){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(E){}}}var C=new XMLHttpRequest();C.open("GET",B,true);C.setRequestHeader("Content-Type","application/x-javascript;");C.onreadystatechange=function(){if(C.readyState==4&&C.status==200){if(C.responseText){A(C.responseText)}}};C.send(D)};